<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for liblouis (version 3.0.0, 15 July 2016),
a Braille Translation and Back-Translation Library derived from the
Linux screen reader BRLTTY. 


Copyright (C) 1999-2006 by the BRLTTY Team.

Copyright (C) 2004-2007 ViewPlus Technologies, Inc.
www.viewplus.com.

Copyright (C) 2007, 2009 Abilitiessoft, Inc.
www.abilitiessoft.org.

Copyright (C) 2014, 2016 Swiss Library for the Blind, Visually
Impaired and Print Disabled. www.sbs.ch.


This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Lesser (or library) General Public License
(LGPL) as published by the Free Software Foundation; either version 3,
or (at your option) any later version.

This file is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser (or Library) General Public License LGPL for more details.

You should have received a copy of the GNU Lesser (or Library) General
Public License (LGPL) along with this program; see the file COPYING.
If not, write to the Free Software Foundation, 51 Franklin Street,
Fifth Floor, Boston, MA 02110-1301, USA. -->
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Liblouis User&rsquo;s and Programmer&rsquo;s Manual</title>

<meta name="description" content="Liblouis User&rsquo;s and Programmer&rsquo;s Manual">
<meta name="keywords" content="Liblouis User&rsquo;s and Programmer&rsquo;s Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="Top">
<link href="#Concept-Index" rel="index" title="Concept Index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Liblouis User&rsquo;s and Programmer&rsquo;s Manual</h1>










<a name="SEC_Contents"></a>
<h2 class="contents-heading">Table of Contents</h2>

<div class="contents">

<ul class="no-bullet">
  <li><a name="toc-Introduction-1" href="#Introduction">1 Introduction</a>
  <ul class="no-bullet">
    <li><a name="toc-Who-is-this-manual-for" href="#Who-is-this-manual-for">1.1 Who is this manual for</a></li>
    <li><a name="toc-How-to-read-this-manual" href="#How-to-read-this-manual">1.2 How to read this manual</a></li>
  </ul></li>
  <li><a name="toc-How-to-Write-Translation-Tables-1" href="#How-to-Write-Translation-Tables">2 How to Write Translation Tables</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-1" href="#Overview">2.1 Overview</a></li>
    <li><a name="toc-Hyphenation-Tables-1" href="#Hyphenation-Tables">2.2 Hyphenation Tables</a></li>
    <li><a name="toc-Character_002dDefinition-Opcodes-1" href="#Character_002dDefinition-Opcodes">2.3 Character-Definition Opcodes</a></li>
    <li><a name="toc-Braille-Indicator-Opcodes-1" href="#Braille-Indicator-Opcodes">2.4 Braille Indicator Opcodes</a></li>
    <li><a name="toc-Emphasis-Opcodes-1" href="#Emphasis-Opcodes">2.5 Emphasis Opcodes</a>
    <ul class="no-bullet">
      <li><a name="toc-Emphasis-class-1" href="#Emphasis-class">2.5.1 Emphasis class</a></li>
      <li><a name="toc-Contexts-1" href="#Contexts">2.5.2 Contexts</a>
      <ul class="no-bullet">
        <li><a name="toc-None-1" href="#None">2.5.2.1 None</a></li>
        <li><a name="toc-Letter-1" href="#Letter">2.5.2.2 Letter</a></li>
        <li><a name="toc-Word-1" href="#Word">2.5.2.3 Word</a></li>
        <li><a name="toc-Phrase-1" href="#Phrase">2.5.2.4 Phrase</a></li>
        <li><a name="toc-Symbol-1" href="#Symbol">2.5.2.5 Symbol</a></li>
      </ul></li>
      <li><a name="toc-Fallback-behavior-1" href="#Fallback-behavior">2.5.3 Fallback behavior</a></li>
      <li><a name="toc-Computer-braille-1" href="#Computer-braille">2.5.4 Computer braille</a></li>
    </ul></li>
    <li><a name="toc-Special-Symbol-Opcodes-1" href="#Special-Symbol-Opcodes">2.6 Special Symbol Opcodes</a></li>
    <li><a name="toc-Special-Processing-Opcodes-1" href="#Special-Processing-Opcodes">2.7 Special Processing Opcodes</a></li>
    <li><a name="toc-Translation-Opcodes-1" href="#Translation-Opcodes">2.8 Translation Opcodes</a></li>
    <li><a name="toc-Character_002dClass-Opcodes-1" href="#Character_002dClass-Opcodes">2.9 Character-Class Opcodes</a></li>
    <li><a name="toc-Swap-Opcodes-1" href="#Swap-Opcodes">2.10 Swap Opcodes</a></li>
    <li><a name="toc-The-Context-and-Multipass-Opcodes-1" href="#The-Context-and-Multipass-Opcodes">2.11 The Context and Multipass Opcodes</a></li>
    <li><a name="toc-The-correct-Opcode-1" href="#The-correct-Opcode">2.12 The correct Opcode</a></li>
    <li><a name="toc-Miscellaneous-Opcodes-1" href="#Miscellaneous-Opcodes">2.13 Miscellaneous Opcodes</a></li>
  </ul></li>
  <li><a name="toc-Notes-on-Back_002dTranslation-1" href="#Notes-on-Back_002dTranslation">3 Notes on Back-Translation</a></li>
  <li><a name="toc-Testing-Translation-Tables-interactively-1" href="#Testing-Translation-Tables-interactively">4 Testing Translation Tables interactively</a>
  <ul class="no-bullet">
    <li><a name="toc-lou_005fdebug-1" href="#lou_005fdebug">4.1 lou_debug</a></li>
    <li><a name="toc-lou_005ftrace-1" href="#lou_005ftrace">4.2 lou_trace</a></li>
    <li><a name="toc-lou_005fchecktable-1" href="#lou_005fchecktable">4.3 lou_checktable</a></li>
    <li><a name="toc-lou_005fallround-1" href="#lou_005fallround">4.4 lou_allround</a></li>
    <li><a name="toc-lou_005ftranslate-1" href="#lou_005ftranslate-_0028program_0029">4.5 lou_translate</a></li>
    <li><a name="toc-lou_005fcheckhyphens-1" href="#lou_005fcheckhyphens">4.6 lou_checkhyphens</a></li>
  </ul></li>
  <li><a name="toc-Automated-Testing-of-Translation-Tables-1" href="#Automated-Testing-of-Translation-Tables">5 Automated Testing of Translation Tables</a>
  <ul class="no-bullet">
    <li><a name="toc-YAML-Tests-1" href="#YAML-Tests">5.1 YAML Tests</a>
    <ul class="no-bullet">
      <li><a name="toc-Optional-test-description" href="#Optional-test-description">5.1.1 Optional test description</a></li>
    </ul></li>
    <li><a name="toc-Doctests-1" href="#Doctests">5.2 Doctests</a></li>
  </ul></li>
  <li><a name="toc-Programming-with-liblouis-1" href="#Programming-with-liblouis">6 Programming with liblouis</a>
  <ul class="no-bullet">
    <li><a name="toc-Overview-2" href="#Overview-_0028library_0029">6.1 Overview</a></li>
    <li><a name="toc-Data-structure-of-liblouis-tables-1" href="#Data-structure-of-liblouis-tables">6.2 Data structure of liblouis tables</a></li>
    <li><a name="toc-lou_005fversion-1" href="#lou_005fversion">6.3 lou_version</a></li>
    <li><a name="toc-lou_005ftranslateString-1" href="#lou_005ftranslateString">6.4 lou_translateString</a></li>
    <li><a name="toc-lou_005ftranslate-2" href="#lou_005ftranslate">6.5 lou_translate</a></li>
    <li><a name="toc-lou_005fbackTranslateString-1" href="#lou_005fbackTranslateString">6.6 lou_backTranslateString</a></li>
    <li><a name="toc-lou_005fbackTranslate-1" href="#lou_005fbackTranslate">6.7 lou_backTranslate</a></li>
    <li><a name="toc-lou_005fhyphenate-1" href="#lou_005fhyphenate">6.8 lou_hyphenate</a></li>
    <li><a name="toc-lou_005fcompileString-1" href="#lou_005fcompileString">6.9 lou_compileString</a></li>
    <li><a name="toc-lou_005fgetTypeformForEmphClass-1" href="#lou_005fgetTypeformForEmphClass">6.10 lou_getTypeformForEmphClass</a></li>
    <li><a name="toc-lou_005fdotsToChar-1" href="#lou_005fdotsToChar">6.11 lou_dotsToChar</a></li>
    <li><a name="toc-lou_005fcharToDots-1" href="#lou_005fcharToDots">6.12 lou_charToDots</a></li>
    <li><a name="toc-lou_005fregisterLogCallback-1" href="#lou_005fregisterLogCallback">6.13 lou_registerLogCallback</a></li>
    <li><a name="toc-lou_005fsetLogLevel-1" href="#lou_005fsetLogLevel">6.14 lou_setLogLevel</a></li>
    <li><a name="toc-lou_005flogFile-1" href="#lou_005flogFile">6.15 lou_logFile</a></li>
    <li><a name="toc-lou_005flogPrint-_0028deprecated_0029" href="#lou_005flogPrint">6.16 lou_logPrint (deprecated)</a></li>
    <li><a name="toc-lou_005flogEnd-1" href="#lou_005flogEnd">6.17 lou_logEnd</a></li>
    <li><a name="toc-lou_005fsetDataPath-1" href="#lou_005fsetDataPath">6.18 lou_setDataPath</a></li>
    <li><a name="toc-lou_005fgetDataPath-1" href="#lou_005fgetDataPath">6.19 lou_getDataPath</a></li>
    <li><a name="toc-lou_005fgetTable-1" href="#lou_005fgetTable">6.20 lou_getTable</a></li>
    <li><a name="toc-lou_005fcheckTable-1" href="#lou_005fcheckTable">6.21 lou_checkTable</a></li>
    <li><a name="toc-lou_005freadCharFromFile-1" href="#lou_005freadCharFromFile">6.22 lou_readCharFromFile</a></li>
    <li><a name="toc-lou_005ffree-1" href="#lou_005ffree">6.23 lou_free</a></li>
    <li><a name="toc-Python-bindings-1" href="#Python-bindings">6.24 Python bindings</a></li>
  </ul></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">Concept Index</a></li>
  <li><a name="toc-Opcode-Index-1" href="#Opcode-Index">Opcode Index</a></li>
  <li><a name="toc-Function-Index-1" href="#Function-Index">Function Index</a></li>
  <li><a name="toc-Program-Index-1" href="#Program-Index">Program Index</a></li>
</ul>
</div>


<a name="Top"></a>
<a name="Liblouis-User_0027s-and-Programmer_0027s-Manual"></a>
<h1 class="top">Liblouis User&rsquo;s and Programmer&rsquo;s Manual</h1>

<p>This manual is for liblouis (version 3.0.0, 15 July 2016),
a Braille Translation and Back-Translation Library derived from the
Linux screen reader <acronym>BRLTTY</acronym>. 
</p>

<p>Copyright &copy; 1999-2006 by the BRLTTY Team.
</p>
<p>Copyright &copy; 2004-2007 ViewPlus Technologies, Inc.
<a href="www.viewplus.com">www.viewplus.com</a>.
</p>
<p>Copyright &copy; 2007, 2009 Abilitiessoft, Inc.
<a href="www.abilitiessoft.org">www.abilitiessoft.org</a>.
</p>
<p>Copyright &copy; 2014, 2016 Swiss Library for the Blind, Visually
Impaired and Print Disabled. <a href="www.sbs.ch">www.sbs.ch</a>.
</p>

<blockquote>
<p>This file is free software; you can redistribute it and/or modify it
under the terms of the GNU Lesser (or library) General Public License
(LGPL) as published by the Free Software Foundation; either version 3,
or (at your option) any later version.
</p>
<p>This file is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
Lesser (or Library) General Public License LGPL for more details.
</p>
<p>You should have received a copy of the GNU Lesser (or Library) General
Public License (LGPL) along with this program; see the file COPYING.
If not, write to the Free Software Foundation, 51 Franklin Street,
Fifth Floor, Boston, MA 02110-1301, USA.
</p></blockquote>



<hr>
<a name="Introduction"></a>
<a name="Introduction-1"></a>
<h2 class="chapter">1 Introduction</h2>

<p>Liblouis is an open-source braille translator and back-translator
derived from the translation routines in the BRLTTY screen reader for
Linux. It has, however, gone far beyond these routines. It is named in
honor of Louis Braille. In Linux and Mac OSX it is a shared library,
and in Windows it is a DLL. For installation instructions see the
README file. Please report bugs and oddities to the mailing list,
<a href="mailto:liblouis-liblouisxml@freelists.org">liblouis-liblouisxml@freelists.org</a>
</p>
<p>This documentation is derived from Chapter 7 of the BRLTTY manual, but
it has been extensively rewritten to cover new features.
</p>
<a name="Who-is-this-manual-for"></a>
<h3 class="section">1.1 Who is this manual for</h3>

<p>This manual has two main audiences: People who want to write or
improve a braille translation table and people who want to use the
braille translator library in their own programs. This manual is
probably not for people who are looking for some turn-key braille
translation software.
</p>
<a name="How-to-read-this-manual"></a>
<h3 class="section">1.2 How to read this manual</h3>

<p>If you are mostly interested in writing braille translation tables
then you want to focus on <a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a>. You
might want to look at <a href="#Notes-on-Back_002dTranslation">Notes on Back-Translation</a> if you are
interested in back-translation. Finally <a href="#Testing-Translation-Tables-interactively">Testing Translation Tables interactively</a> and <a href="#Automated-Testing-of-Translation-Tables">Automated Testing of Translation Tables</a> will show how your braille translation tables can be tested
interactively and also in an automated fashion.
</p>
<p>If you want to use the braille translation library in your own program
or you are interested in enhancing the braille translation library
itself then you will want to look at <a href="#Programming-with-liblouis">Programming with liblouis</a>.
</p>
<hr>
<a name="How-to-Write-Translation-Tables"></a>
<a name="How-to-Write-Translation-Tables-1"></a>
<h2 class="chapter">2 How to Write Translation Tables</h2>

<p>For many languages there is already a translation table, so before
creating a new table start by looking at existing tables to modify
them as needed.
</p>
<p>Typically, a braille translation table consists of several parts.
First are header and includes, in which you write what the table is
for, license information and include tables you need for your table.
</p>
<p>Following this, you&rsquo;ll write various translation rules and lastly you
write special rules to handle certain situations.
</p>
<a name="index-opcode"></a>
<p>A translation rule is composed of at least three parts: the opcode
(translation command), character(s) and braille dots. An opcode is a
command you give to a machine or a program to perform something on
your behalf. In liblouis, an opcode tells it which rule to use when
translating characters into braille. An operand can be thought of as
parameters for the translation rule and is composed of two parts: the
character or word to be translated and the braille dots.
</p>
<p>For example, suppose you want to read the word &lsquo;<samp>world</samp>&rsquo; using
braille dots &lsquo;<samp>456</samp>&rsquo;, followed by the letter &lsquo;<samp>W</samp>&rsquo; all the time.
Then you&rsquo;d write:
</p>
<div class="example">
<pre class="example">always world 456-2456
</pre></div>

<p>The word <code>always</code> is an opcode which tells liblouis to always
honor this translation, that is to say when the word &lsquo;<samp>world</samp>&rsquo; (an
operand) is encountered, always show braille dots &lsquo;<samp>456</samp>&rsquo; followed
by the letter &lsquo;<samp>w</samp>&rsquo; (&lsquo;<samp>2456</samp>&rsquo;).
</p>
<p>When you write any braille table for any language, we&rsquo;d recommend
working from some sort of official standard, and have a device or a
program in which you can test your work.
</p>

<hr>
<a name="Overview"></a>
<a name="Overview-1"></a>
<h3 class="section">2.1 Overview</h3>

<p>Many translation (contraction) tables have already been made up. They
are included in the distribution in the tables directory and can be
studied as part of the documentation. Some of the more helpful (and
normative) are listed in the following table:
</p>
<dl compact="compact">
<dt><samp>chardefs.cti</samp></dt>
<dd><p>Character definitions for U.S. tables
</p></dd>
<dt><samp>compress.ctb</samp></dt>
<dd><p>Remove excessive whitespace
</p></dd>
<dt><samp>en-us-g1.ctb</samp></dt>
<dd><p>Uncontracted American English
</p></dd>
<dt><samp>en-us-g2.ctb</samp></dt>
<dd><p>Contracted or Grade 2 American English
</p></dd>
<dt><samp>en-us-brf.dis</samp></dt>
<dd><p>Make liblouis output conform to BRF standard
</p></dd>
<dt><samp>en-us-comp8.ctb</samp></dt>
<dd><p>8-dot computer braille for use in coding examples
</p></dd>
<dt><samp>en-us-comp6.ctb</samp></dt>
<dd><p>6-dot computer braille
</p></dd>
<dt><samp>nemeth.ctb</samp></dt>
<dd><p>Nemeth Code translation for use with liblouisutdml
</p></dd>
<dt><samp>nemeth_edit.ctb</samp></dt>
<dd><p>Fixes errors at the boundaries of math and text
</p>
</dd>
</dl>

<p>The names used for files containing translation tables are completely
arbitrary. They are not interpreted in any way by the translator.
Contraction tables may be 8-bit ASCII files, UTF-8, 16-bit big-endian
Unicode files or 16-bit little-endian Unicode files. Blank lines are
ignored. Any leading and trailing whitespace (any number of blanks
and/or tabs) is ignored. Lines which begin with a number sign or hatch
mark (&lsquo;<samp>#</samp>&rsquo;) are ignored, i.e. they are comments. If the number
sign is not the first non-blank character in the line, it is treated
as an ordinary character. If the first non-blank character is
less-than (&lsquo;<samp>&lt;</samp>&rsquo;) the line is also treated as a comment. This makes
it possible to mark up tables as xhtml documents. Lines which are not
blank or comments define table entries. The general format of a table
entry is:
</p>
<div class="example">
<pre class="example">opcode operands comments
</pre></div>

<p>Table entries may not be split between lines. The opcode is a mnemonic
that specifies what the entry does. The operands may be character
sequences, braille dot patterns or occasionally something else. They
are described for each opcode, please see <a href="#Opcode-Index">Opcode Index</a>. With some
exceptions, opcodes expect a certain number of operands. Any text on
the line after the last operand is ignored, and may be a comment. A
few opcodes accept a variable number of operands. In this case a
number sign (&lsquo;<samp>#</samp>&rsquo;) begins a comment unless it is preceded by a
backslash (&lsquo;<samp>\</samp>&rsquo;).
</p>
<p>Here are some examples of table entries.
</p>
<div class="example">
<pre class="example"># This is a comment.
always world 456-2456 A word and the dot pattern of its contraction
</pre></div>

<p>Most opcodes have both a &quot;characters&quot; operand and a &quot;dots&quot; operand,
though some have only one and a few have other types.
</p>
<a name="index-characters-operand"></a>
<p>The characters operand consists of any combination of characters and
escape sequences proceeded and followed by whitespace. Escape
sequences are used to represent difficult characters. They begin with
a backslash (&lsquo;<samp>\</samp>&rsquo;). They are:
</p>
<dl compact="compact">
<dt><kbd>\</kbd></dt>
<dd><p>backslash
</p></dd>
<dt><kbd>\f</kbd></dt>
<dd><p>form feed
</p></dd>
<dt><kbd>\n</kbd></dt>
<dd><p>new line
</p></dd>
<dt><kbd>\r</kbd></dt>
<dd><p>carriage return
</p></dd>
<dt><kbd>\s</kbd></dt>
<dd><p>blank (space)
</p></dd>
<dt><kbd>\t</kbd></dt>
<dd><p>horizontal tab
</p></dd>
<dt><kbd>\v</kbd></dt>
<dd><p>vertical tab
</p></dd>
<dt><kbd>\e</kbd></dt>
<dd><p>&quot;escape&quot; character (hex 1b, dec 27)
</p></dd>
<dt><kbd>\xhhhh</kbd></dt>
<dd><p>4-digit hexadecimal value of a character
</p>
</dd>
</dl>

<p>If liblouis has been compiled for 32-bit Unicode the following are
also recognized.
</p>
<dl compact="compact">
<dt><kbd>\yhhhhh</kbd></dt>
<dd><p>5-digit (20 bit) character
</p></dd>
<dt><kbd>\zhhhhhhhh</kbd></dt>
<dd><p>Full 32-bit value.
</p>
</dd>
</dl>

<a name="index-dots-operand"></a>
<p>The dots operand is a braille dot pattern. The real braille dots, 1
through 8, must be specified with their standard numbers.
</p>
<a name="index-virtual-dots"></a>
<a name="virtual-dots"></a><p>liblouis recognizes <em>virtual dots</em>, which are used for special
purposes, such as distinguishing accent marks. There are seven virtual
dots. They are specified by the number 9 and the letters &lsquo;<samp>a</samp>&rsquo;
through &lsquo;<samp>f</samp>&rsquo;.
</p>
<a name="index-multi_002dcell-dot-pattern"></a>
<p>For a multi-cell dot pattern, the cell specifications must be
separated from one another by a dash (&lsquo;<samp>-</samp>&rsquo;). For example, the
contraction for the English word &lsquo;<samp>lord</samp>&rsquo; (the letter &lsquo;<samp>l</samp>&rsquo;
preceded by dot 5) would be specified as &lsquo;<samp>5-123</samp>&rsquo;. A space may be
specified with the special dot number 0.
</p>
<p>An opcode which is helpful in writing translation tables is
<code>include</code>. Its format is:
</p>
<div class="example">
<pre class="example">include filename
</pre></div>

<p>It reads the file indicated by <code>filename</code> and incorporates or
includes its entries into the table. Included files can include other
files, which can include other files, etc. For an example, see what
files are included by the entry <code>include en-us-g1.ctb</code> in the table
<samp>en-us-g2.ctb</samp>. If the included file is not in the same directory
as the main table, use a full path name for filename. Tables can also be
specified in a table list, in which the table names are separated by
commas and given as a single table name in calls to the translation
functions.
</p>
<p>The order of the various types of opcodes or table entries is
important. Character-definition opcodes should come first. However, if
the optional <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) is used it should precede
character-definition opcodes. Braille-indicator opcodes should come
next. Translation opcodes should follow. The <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>) is a
translation opcode, even though it is considered along with the
multipass opcodes. These latter should follow the translation opcodes.
The <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) can be used anywhere after the
character-definition opcodes, but it is probably a good idea to group
all <code>correct</code> opcodes together. The <code>include</code> opcode (see <a href="#include-opcode"><code>include</code></a>) can be
used anywhere, but the order of entries in the combined table must
conform to the order given above. Within each type of opcode, the
order of entries is generally unimportant. Thus the translation
entries can be grouped alphabetically or in any other order that is
convenient. Hyphenation tables may be specified either with an 
<code>include</code> opcode or as part of a table list. They should come after 
everything else. Character-definition opcodes are necessary for 
hyphenation tables to work.
</p>
<hr>
<a name="Hyphenation-Tables"></a>
<a name="Hyphenation-Tables-1"></a>
<h3 class="section">2.2 Hyphenation Tables</h3>

<p>Hyphenation tables are necessary to make opcodes such as the
<code>nocross</code> opcode (see <a href="#nocross-opcode"><code>nocross</code></a>) function properly. There are no opcodes for
hyphenation table entries because these tables have a special format.
Therefore, they cannot be specified as part of an ordinary table.
Rather, they must be included using the <code>include</code> opcode (see <a href="#include-opcode"><code>include</code></a>) or as part
of a table list. The liblouis hyphenation algorithm was adopted from the
one used by OpenOffice. Note that Hyphenation tables must follow
character definitions and should preferably be the last. For an example
of a hyphenation table, see <samp>hyph_en_US.dic</samp>.
</p>
<hr>
<a name="Character_002dDefinition-Opcodes"></a>
<a name="Character_002dDefinition-Opcodes-1"></a>
<h3 class="section">2.3 Character-Definition Opcodes</h3>

<p>These opcodes are needed to define attributes such as digit,
punctuation, letter, etc. for all characters and their dot patterns.
liblouis has no built-in character definitions, but such definitions
are essential to the operation of the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>), the
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>), the multipass opcodes and the back-translator. If
the dot pattern is a single cell, it is used to define the mapping
between dot patterns and characters, unless a <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) for
that character-dot-pattern pair has been used previously. If only a
single-cell dot pattern has been given for a character, that dot
pattern is defined with the character&rsquo;s own attributes. If more than
one cell is given and some of them have not previously been defined as
single cells, the undefined cells are entered into the dots table with
the space attribute. This is done for backward compatibility with
old tables, but it may cause problems with the above opcodes or
back-translation. For this reason, every single-cell dot pattern
should be defined before it is used in a multi-cell character
representation. The best way to do this is to use the 8-dot computer
braille representation for the particular braille code. If a character
or dot pattern used in any rule, except those with the <code>display</code>
opcode, the <code>repeated</code> opcode (see <a href="#repeated-opcode"><code>repeated</code></a>) or the <code>replace</code> opcode (see <a href="#replace-opcode"><code>replace</code></a>), is not
defined by one of the character-definition opcodes, liblouis will give
an error message and refuse to continue until the problem is fixed. If
the translator or back-translator encounters an undefined character in
its input it produces a succinct error indication in its output, and
the character is treated as a space.
</p>
<dl compact="compact">
<dd><a name="index-space"></a>
<a name="space-opcode"></a></dd>
<dt><code>space character dots</code></dt>
<dd><p>Defines a character as a space and also defines the dot pattern as
such. for example:
</p>
<div class="example">
<pre class="example">space \s 0 \s is the escape sequence for blank; 0 means no dots.
</pre></div>

<a name="index-punctuation"></a>
<a name="punctuation-opcode"></a></dd>
<dt><code>punctuation character dots</code></dt>
<dd><p>Associates a punctuation mark in the particular language with a
braille representation and defines the character and dot pattern as
punctuation. For example:
</p>
<div class="example">
<pre class="example">punctuation . 46 dot pattern for period in NAB computer braille
</pre></div>

<a name="index-digit"></a>
<a name="digit-opcode"></a></dd>
<dt><code>digit character dots</code></dt>
<dd><p>Associates a digit with a dot pattern and defines the character as a
digit. For example:
</p>
<div class="example">
<pre class="example">digit 0 356 NAB computer braille
</pre></div>

<a name="index-uplow"></a>
<a name="uplow-opcode"></a></dd>
<dt><code>uplow characters dots [,dots]</code></dt>
<dd><p>The characters operand must be a pair of letters, of which the first
is uppercase and the second lowercase. The first dots suboperand
indicates the dot pattern for the upper-case letter. It may have more
than one cell. The second dots suboperand must be separated from the
first by a comma and is optional, as indicated by the square brackets.
If present, it indicates the dot pattern for the lower-case letter. It
may also have more than one cell. If the second dots suboperand is not
present the first is used for the lower-case letter as well as the
upper-case letter. This opcode is needed because not all languages
follow a consistent pattern in assigning Unicode codes to upper and
lower case letters. It should be used even for languages that do. The
distinction is important in the forward translator. for example:
</p>
<div class="example">
<pre class="example">uplow Aa 17,1
</pre></div>

<a name="index-grouping"></a>
<a name="grouping-opcode"></a></dd>
<dt><code>grouping name characters dots ,dots</code></dt>
<dd><p>This opcode is used to indicate pairs of grouping symbols used in
processing mathematical expressions. These symbols are usually
generated by the MathML interpreter in liblouisutdml. They are used in
multipass opcodes. The name operand must contain only letters, but
they may be upper- or lower-case. The characters operand must contain
exactly two Unicode characters. The dots operand must contain exactly
two braille cells, separated by a comma. Note that grouping dot
patterns also need to be declared with the <code>exactdots</code> opcode (see <a href="#exactdots-opcode"><code>exactdots</code></a>). The
characters may need to be declared with the <code>math</code> opcode (see <a href="#math-opcode"><code>math</code></a>).
</p>
<div class="example">
<pre class="example">grouping mrow \x0001\x0002 1e,2e
grouping mfrac \x0003\x0004 3e,4e
</pre></div>

<a name="index-letter"></a>
<a name="letter-opcode"></a></dd>
<dt><code>letter character dots</code></dt>
<dd><p>Associates a letter in the language with a braille representation and
defines the character as a letter. This is intended for letters which
are neither uppercase nor lowercase.
</p>
<a name="index-lowercase"></a>
<a name="lowercase-opcode"></a></dd>
<dt><code>lowercase character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines the character as
a lowercase letter. Both the character and the dot pattern have the
attributes lowercase and letter.
</p>
<a name="index-uppercase"></a>
<a name="uppercase-opcode"></a></dd>
<dt><code>uppercase character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines the character as
an uppercase letter. Both the character and the dot pattern have the
attributes uppercase and letter. <code>lowercase</code> and <code>uppercase</code>
should be used when a letter has only one case. Otherwise use the
<code>uplow</code> opcode (see <a href="#uplow-opcode"><code>uplow</code></a>).
</p>
<a name="index-litdigit"></a>
<a name="litdigit-opcode"></a></dd>
<dt><code>litdigit digit dots</code></dt>
<dd><p>Associates a digit with the dot pattern which should be used to
represent it in literary texts. For example:
</p>
<div class="example">
<pre class="example">litdigit 0 245
litdigit 1 1
</pre></div>

<a name="index-sign"></a>
<a name="sign-opcode"></a></dd>
<dt><code>sign character dots</code></dt>
<dd><p>Associates a character with a dot pattern and defines both as a sign.
This opcode should be used for things like at sign (&lsquo;<samp>@</samp>&rsquo;),
percent (&lsquo;<samp>%</samp>&rsquo;), dollar sign (&lsquo;<samp>$</samp>&rsquo;), etc. Do not use it to
define ordinary punctuation such as period and comma. For example:
</p>
<div class="example">
<pre class="example">sign % 4-25-1234 literary percent sign
</pre></div>

<a name="index-math"></a>
<a name="math-opcode"></a></dd>
<dt><code>math character dots</code></dt>
<dd><p>Associates a character and a dot pattern and defines them as a
mathematical symbol. It should be used for less than (&lsquo;<samp>&lt;</samp>&rsquo;),
greater than(&lsquo;<samp>&gt;</samp>&rsquo;), equals(&lsquo;<samp>=</samp>&rsquo;), plus(&lsquo;<samp>+</samp>&rsquo;), etc. For
example:
</p>
<div class="example">
<pre class="example">math + 346 plus
</pre></div>

</dd>
</dl>

<hr>
<a name="Braille-Indicator-Opcodes"></a>
<a name="Braille-Indicator-Opcodes-1"></a>
<h3 class="section">2.4 Braille Indicator Opcodes</h3>

<p>Braille indicators are dot patterns which are inserted into the
braille text to indicate such things as capitalization, italic type,
computer braille, etc. The opcodes which define them are followed only
by a dot pattern, which may be one or more cells.
</p>
<dl compact="compact">
<dd><a name="index-capsign"></a>
<a name="capsign-opcode"></a></dd>
<dt><code>capsign dots</code></dt>
<dd><p>The dot pattern which indicates capitalization of a single letter. In
English, this is dot 6. For example:
</p>
<div class="example">
<pre class="example">capsign 6
</pre></div>

<a name="index-begcaps"></a>
<a name="begcaps-opcode"></a></dd>
<dt><code>begcaps dots</code></dt>
<dd><p>The dot pattern which begins a block of capital letters. For example:
</p>
<div class="example">
<pre class="example">begcaps 6-6
</pre></div>

<a name="index-endcaps"></a>
<a name="endcaps-opcode"></a></dd>
<dt><code>endcaps dots</code></dt>
<dd><p>The dot pattern which ends a block of capital letters within a word.
For example:
</p>
<div class="example">
<pre class="example">endcaps 6-3
</pre></div>

<a name="index-letsign"></a>
<a name="letsign-opcode"></a></dd>
<dt><code>letsign dots</code></dt>
<dd><p>This indicator is needed in Grade 2 to show that a single letter is
not a contraction. It is also used when an abbreviation happens to be
a sequence of letters that is the same as a contraction. For example:
</p>
<div class="example">
<pre class="example">letsign 56
</pre></div>

<a name="index-noletsign"></a>
<a name="noletsign-opcode"></a></dd>
<dt><code>noletsign letters</code></dt>
<dd>
<p>The letters in the operand will not be proceeded by a letter sign.
More than one <code>noletsign</code> opcode can be used. This is equivalent
to a single entry containing all the letters. In addition, if a single
letter, such as &lsquo;<samp>a</samp>&rsquo; in English, is defined as a <code>word</code>
(see <a href="#word-opcode"><code>word</code></a>) or <code>largesign</code>
(see <a href="#largesign-opcode"><code>largesign</code></a>), it will be
treated as though it had also been specified in a <code>noletsign</code>
entry.
</p>
<a name="index-noletsignbefore"></a>
<a name="noletsignbefore-opcode"></a></dd>
<dt><code>noletsignbefore characters</code></dt>
<dd><p>If any of the characters proceeds a single letter without a space a
letter sign is not used. By default the characters apostrophe
(&lsquo;<samp>'</samp>&rsquo;) and period (&lsquo;<samp>.</samp>&rsquo;) have this property. Use of a
<code>noletsignbefore</code> entry cancels the defaults. If more than one
<code>noletsignbefore</code> entry is used, the characters in all entries
are combined.
</p>
<a name="index-noletsignafter"></a>
<a name="noletsignafter-opcode"></a></dd>
<dt><code>noletsignafter characters</code></dt>
<dd><p>If any of the characters follows a single letter without a space a
letter sign is not used. By default the characters apostrophe
(&lsquo;<samp>'</samp>&rsquo;) and period (&lsquo;<samp>.</samp>&rsquo;) have this property. Use of a
<code>noletsignafter</code> entry cancels the defaults. If more than one
<code>noletsignafter</code> entry is used the characters in all entries are
combined.
</p>
<a name="index-nocontractsign"></a>
<a name="nocontractsign-opcode"></a></dd>
<dt><code>nocontractsign dots</code></dt>
<dd>
<p>The dots in this opcode are used to indicate a letter or a sequence of
letters that are not a contraction, e.g. &lsquo;<samp>CD</samp>&rsquo;. The opcode is
similar to the <code>letsign</code> opcode (see <a href="#letsign-opcode"><code>letsign</code></a>).
</p>

<a name="index-numsign"></a>
<a name="numsign-opcode"></a></dd>
<dt><code>numsign dots</code></dt>
<dd><p>The translator inserts this indicator before numbers made up of digits
defined with the <code>litdigit</code> opcode (see <a href="#litdigit-opcode"><code>litdigit</code></a>) to show that they are a number
and not letters or some other symbols. For example:
</p>
<div class="example">
<pre class="example">numsign 3456
</pre></div>

</dd>
</dl>

<hr>
<a name="Emphasis-Opcodes"></a>
<a name="Emphasis-Opcodes-1"></a>
<h3 class="section">2.5 Emphasis Opcodes</h3>

<p>In many braille systems emphasis such as bold, italics or underline is
indicated using special dot patterns that mark the start and often
also the end. For some languages these braille indicators differ
depending on the context, i.e. here is an separate indicator for an
emphasized word and another one for an emphasized phrase. To
accommodate for all these usage scenarios liblouis provides a number of
opcodes for various contexts.
</p>
<p>At the same time some braille systems use different indicators for
different kinds of emphasis while others know only one kind of
emphasis. For that reason liblouis doesn&rsquo;t hard code any emphasis but
the table author defines which kind of emphasis exist for a specific
language using the <code>emphclass</code> opcode (see <a href="#emphclass-opcode"><code>emphclass</code></a>) opcode.
</p>

<hr>
<a name="Emphasis-class"></a>
<a name="Emphasis-class-1"></a>
<h4 class="subsection">2.5.1 Emphasis class</h4>

<p>The <code>emphclass</code> opcode defines the classes of emphasis that are
relevant for a particular language. For all emphasis that need special
indicators an emphasis class has to be declared.
</p>
<dl compact="compact">
<dd><a name="index-emphclass"></a>
<a name="emphclass-opcode"></a></dd>
<dt><code>emphclass &lt;emphasis class&gt;</code></dt>
<dd><p>Define an emphasis class to be used later in other emphasis related
opcodes in the table.
</p>
<div class="example">
<pre class="example">emphclass italic
emphclass underline
emphclass bold
emphclass transnote
</pre></div>

</dd>
</dl>

<hr>
<a name="Contexts"></a>
<a name="Contexts-1"></a>
<h4 class="subsection">2.5.2 Contexts</h4>

<p>In order to understand the capabilities of Liblouis for emphasis
handling we have to look at the different contexts that are supported.
</p>

<hr>
<a name="None"></a>
<a name="None-1"></a>
<h4 class="subsubsection">2.5.2.1 None</h4>

<p>For some languages there is no such concept as contexts. Emphasis is
always handled the same regardless of context. There is simply an
indicator for the beginning of emphasis and another one for the end of
the emphasis.
</p>
<dl compact="compact">
<dd><a name="index-begemph"></a>
<a name="begemph-opcode"></a></dd>
<dt><code>begemph &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of emphasis.
</p>
<div class="example">
<pre class="example">begemph italic 46-3
</pre></div>

<a name="index-endemph"></a>
<a name="endemph-opcode"></a></dd>
<dt><code>endemph &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of emphasis.
</p>
<div class="example">
<pre class="example">endemph italic 46-36
</pre></div>

</dd>
</dl>

<hr>
<a name="Letter"></a>
<a name="Letter-1"></a>
<h4 class="subsubsection">2.5.2.2 Letter</h4>

<p>Some languages have special indicators for single letter emphasis.
</p>
<dl compact="compact">
<dd><a name="index-emphletter"></a>
<a name="emphletter-opcode"></a></dd>
<dt><code>emphletter &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate that the next character is emphasized.
</p>
<div class="example">
<pre class="example">emphletter italic 46-25
</pre></div>

</dd>
</dl>

<hr>
<a name="Word"></a>
<a name="Word-1"></a>
<h4 class="subsubsection">2.5.2.3 Word</h4>

<p>Many languages have special indicators for emphasized words. Usually
they start at the beginning of the word and and implicitly, i.e.
without a closing indicator at the end of the word. There are also use
cases where the emphasis starts in the middle of the word and an
explicit closing indicator is required.
</p>
<dl compact="compact">
<dd><a name="index-begemphword"></a>
<a name="begemphword-opcode"></a></dd>
<dt><code>begemphword &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of an emphasized word
or the beginning of emphasized characters within a word.
</p>
<div class="example">
<pre class="example">begemphword underline 456-36
</pre></div>

<a name="index-endemphword"></a>
<a name="endemphword-opcode"></a></dd>
<dt><code>endemphword &lt;emphasis class&gt;  &lt;dot pattern&gt;</code></dt>
<dd><p>Generally emphasis with word context ends when the word ends. However
when an indication is required to close a word emphasis then this
opcode defines the Braille dot pattern that indicates the end of a word
emphasis.
</p>
<div class="example">
<pre class="example">endemphword transnote 6-3
</pre></div>

<p>If emphasis ends in the middle of a word the Braille dot pattern
defined in this opcode is also used.
</p>
</dd>
</dl>

<hr>
<a name="Phrase"></a>
<a name="Phrase-1"></a>
<h4 class="subsubsection">2.5.2.4 Phrase</h4>

<p>Many languages have a concept of a phrase where the emphasis is valid
for a number of words. The beginning of the phase is indicated with a
braille dot pattern and a closing indicator is put before or after the
last word of the phrase. To define how many words are considered a
phrase in your language use the <code>lenemphphrase</code> opcode (see <a href="#lenemphphrase-opcode"><code>lenemphphrase</code></a>).
</p>
<dl compact="compact">
<dd><a name="index-begemphphrase"></a>
<a name="begemphphrase-opcode"></a></dd>
<dt><code>begemphphrase &lt;emphasis class&gt; &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the beginning of a phrase.
</p>
<div class="example">
<pre class="example">begemphphrase bold 456-46-46
</pre></div>

<a name="index-endemphphrase-before"></a>
<a name="endemphphrase-before-opcode"></a></dd>
<dt><code>endemphphrase before &lt;emphasis class&gt; before &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of a phrase. The closing indicator
will be placed before the last word of the phrase.
</p>
<div class="example">
<pre class="example">endemphphrase bold before 456-46
</pre></div>

<a name="index-endemphphrase-after"></a>
<a name="endemphphrase-after-opcode"></a></dd>
<dt><code>endemphphrase after &lt;emphasis class&gt; after &lt;dot pattern&gt;</code></dt>
<dd><p>Braille dot pattern to indicate the end of a phrase. The closing
indicator will be placed after the last word of the phrase. If both
<code>endemphphrase &lt;emphasis class&gt; before</code> and <code>endemphphrase
&lt;emphasis class&gt; after</code> are defined an error will be signaled.
</p>
<div class="example">
<pre class="example">endemphphrase underline after 6-3
</pre></div>

<a name="index-lenemphphrase"></a>
<a name="lenemphphrase-opcode"></a></dd>
<dt><code>lenemphphrase &lt;emphasis class&gt; &lt;number&gt;</code></dt>
<dd><p>Define how many words are required before a sequence of words is
considered a phrase.
</p>
<div class="example">
<pre class="example">lenemphphrase underline 3
</pre></div>

</dd>
</dl>

<hr>
<a name="Symbol"></a>
<a name="Symbol-1"></a>
<h4 class="subsubsection">2.5.2.5 Symbol</h4>
<p>UEB has a concept of symbols that need special indication. When the
translator detects an emphasis sequence that needs to be indicated
with the rules for a symbol then it will use the dots defined with the
<code>emphletter</code> opcode (see <a href="#emphletter-opcode"><code>emphletter</code></a>). To indicate the end of the symbol it will use
the dots defined in the <code>endemphword</code> opcode (see <a href="#endemphword-opcode"><code>endemphword</code></a>).
</p>
<hr>
<a name="Fallback-behavior"></a>
<a name="Fallback-behavior-1"></a>
<h4 class="subsection">2.5.3 Fallback behavior</h4>

<p>Many braille systems either handle emphasis using no contexts or
otherwise by employing a combination of the letter, word and phrase
contexts. So if a table defines any opcodes for the letter, word or
phrase contexts then liblouis will signal an error for opcodes that
define emphasis with no context. In other words contrary to previous
versions of liblouis there is no fallback behavior.
</p>
<p>As a consequence, there will only be emphasis for a context when the
table defines it. So for example when defining a braille dot pattern
for phrases and not for words liblouis will not indicate emphasis on
words that aren&rsquo;t part of a phrase.
</p>
<hr>
<a name="Computer-braille"></a>
<a name="Computer-braille-1"></a>
<h4 class="subsection">2.5.4 Computer braille</h4>

<p>For computer braille there are only two braille indicators, for the
beginning and end of a sequence of characters to be rendered in
computer braille. Such a sequence may also have other emphasis. The
computer braille indicators are applied not only when computer braille
is indicated in the <code>typeform</code> parameter, but also when a
sequence of characters is determined to be computer braille because it
contains a subsequence defined by the <code>compbrl</code> opcode (see <a href="#compbrl-opcode"><code>compbrl</code></a>).
</p>
<hr>
<a name="Special-Symbol-Opcodes"></a>
<a name="Special-Symbol-Opcodes-1"></a>
<h3 class="section">2.6 Special Symbol Opcodes</h3>

<p>These opcodes define certain symbols, such as the decimal point, which
require special treatment.
</p>
<dl compact="compact">
<dd><a name="index-decpoint"></a>
<a name="decpoint-opcode"></a></dd>
<dt><code>decpoint character dots</code></dt>
<dd><p>This opcode defines the decimal point. The character operand must have
only one character. For example, in <samp>en-us-g1.ctb</samp> we have: 
</p>
<div class="example">
<pre class="example">decpoint . 46
</pre></div>

<a name="index-hyphen"></a>
<a name="hyphen-opcode"></a></dd>
<dt><code>hyphen character dots</code></dt>
<dd><p>This opcode defines the hyphen, that is, the character used in
compound words such as &lsquo;<samp>have-nots</samp>&rsquo;. The back-translator uses it
to determine the end of individual words.
</p>
</dd>
</dl>

<hr>
<a name="Special-Processing-Opcodes"></a>
<a name="Special-Processing-Opcodes-1"></a>
<h3 class="section">2.7 Special Processing Opcodes</h3>

<p>These opcodes cause special processing to be carried out.
</p>
<dl compact="compact">
<dd><a name="index-capsnocont"></a>
<a name="capsnocont-opcode"></a></dd>
<dt><code>capsnocont</code></dt>
<dd><p>This opcode has no operands. If it is specified, words or parts of
words in all caps are not contracted. This is needed for languages
such as Norwegian.
</p>
</dd>
</dl>

<hr>
<a name="Translation-Opcodes"></a>
<a name="Translation-Opcodes-1"></a>
<h3 class="section">2.8 Translation Opcodes</h3>

<p>These opcodes define the braille representations for character
sequences. Each of them defines an entry within the contraction table.
These entries may be defined in any order except, as noted below, when
they define alternate representations for the same character sequence.
</p>
<p>Each of these opcodes specifies a condition under which the
translation is legal, and each also has a characters operand and a
dots operand. The text being translated is processed strictly from
left to right, character by character, with the most eligible entry
for each position being used. If there is more than one eligible entry
for a given position in the text, then the one with the longest
character string is used. If there is more than one eligible entry for
the same character string, then the one defined first is is tested for
legality first. (This is the only case in which the order of the
entries makes a difference.)
</p>
<p>The characters operand is a sequence or string of characters preceded
and followed by whitespace. Each character can be entered in the
normal way, or it can be defined as a four-digit hexadecimal number
preceded by &lsquo;<samp>\x</samp>&rsquo;.
</p>
<p>The dots operand defines the braille representation for the characters
operand. It may also be specified as an equals sign (&lsquo;<samp>=</samp>&rsquo;). This
means that the the default representation for each character
(see <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>) within the sequence is to be
used. Note however that the &lsquo;<samp>=</samp>&rsquo; shortcut for dot patterns is
deprecated. Dot patterns should be written out. Otherwise
back-translation may not be correct.
</p>
<p>In what follows the word &lsquo;<samp>characters</samp>&rsquo; means a sequence of one or
more consecutive letters between spaces and/or punctuation marks.
</p>
<dl compact="compact">
<dd>
<a name="index-noback"></a>
<a name="noback-opcode"></a></dd>
<dt><code>noback opcode ...</code></dt>
<dd><p>This is an opcode prefix, that is to say, it modifies the operation of 
the opcode that follows it on the same line. noback specifies that no 
back-translation is to be done using this line.
</p>
<div class="example">
<pre class="example">noback always ;\s; 0
</pre></div>

<a name="index-nofor"></a>
<a name="nofor-opcode"></a></dd>
<dt><code>nofor opcode ...</code></dt>
<dd><p>This is an opcode prefix which modifies the operation of the opcode 
following it on the same line. nofor specifies that forward translation 
is not to use the information on this line.
</p>
<a name="index-compbrl"></a>
<a name="compbrl-opcode"></a></dd>
<dt><code>compbrl characters</code></dt>
<dd><p>If the characters are found within a block of text surrounded by
whitespace the entire block is translated according to the default
braille representations defined by the <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>, if 8-dot computer braille is enabled or according to the dot
patterns given in the <code>comp6</code> opcode (see <a href="#comp6-opcode"><code>comp6</code></a>), if 6-dot computer braille is
enabled. For example:
</p>
<div class="example">
<pre class="example">compbrl www translate URLs in computer braille
</pre></div>

<a name="index-comp6"></a>
<a name="comp6-opcode"></a></dd>
<dt><code>comp6 character dots</code></dt>
<dd><p>This opcode specifies the translation of characters in 6-dot computer
braille. It is necessary because the translation of a single character
may require more than one cell. The first operand must be a character
with a decimal representation from 0 to 255 inclusive. The second
operand may specify as many cells as necessary. The opcode is somewhat
of a misnomer, since any dots, not just dots 1 through 6, can be
specified. This even includes virtual dots (see <a href="#virtual-dots">virtual dots</a>).
</p>
<a name="index-nocont"></a>
<a name="nocont-opcode"></a></dd>
<dt><code>nocont characters</code></dt>
<dd><p>Like <code>compbrl</code>, except that the string is uncontracted.
<code>prepunc</code> opcode (see <a href="#prepunc-opcode"><code>prepunc</code></a>) and <code>postpunc</code> opcode (see <a href="#postpunc-opcode"><code>postpunc</code></a>) rules are applied,
however. This is useful for specifying that foreign words should not
be contracted in an entire document.
</p>
<a name="index-replace"></a>
<a name="replace-opcode"></a></dd>
<dt><code>replace characters {characters}</code></dt>
<dd><p>Replace the first set of characters, no matter where they appear, with
the second. Note that the second operand is <em>NOT</em> a dot pattern.
It is also optional. If it is omitted the character(s) in the first
operand will be discarded. This is useful for ignoring characters. It
is possible that the &quot;ignored&quot; characters may still affect the
translation indirectly. Therefore, it is preferable to use
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>).
</p>
<a name="index-always"></a>
<a name="always-opcode"></a></dd>
<dt><code>always characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. Do <em>NOT</em> use an entry such as <code>always a 1</code>. Use the
<code>uplow</code>, <code>letter</code>, etc. character definition opcodes
instead. For example:
</p>
<div class="example">
<pre class="example">always world 456-2456 unconditional translation
</pre></div>

<a name="index-repeated"></a>
<a name="repeated-opcode"></a></dd>
<dt><code>repeated characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. Ignore any consecutive repetitions of the same character
sequence. This is useful for shortening long strings of spaces or
hyphens or periods. For example:
</p>
<div class="example">
<pre class="example">repeated --- 36-36-36 shorten separator lines made with hyphens
</pre></div>

<a name="index-repword"></a>
<a name="repword-opcode"></a></dd>
<dt><code>repword characters dots</code></dt>
<dd><p>When characters are encountered check to see if the word before this 
string matches the word after it. If so, replace characters with dots 
and eliminate the second word and any word following another occurrence 
of characters that is the same. This opcode is used in Malaysian 
braille. In this case the rule is:
</p>
<div class="example">
<pre class="example">repword - 123456
</pre></div>

<a name="index-largesign"></a>
<a name="largesign-opcode"></a></dd>
<dt><code>largesign characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern no matter where they
appear. In addition, if two words defined as large signs follow each
other, remove the space between them. For example, in
<samp>en-us-g2.ctb</samp> the words &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo; are both
defined as large signs. Thus, in the phrase &lsquo;<samp>the cat and the dog</samp>&rsquo;
the space would be deleted between &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo;, with the
result &lsquo;<samp>the cat andthe dog</samp>&rsquo;. Of course, &lsquo;<samp>and</samp>&rsquo; and &lsquo;<samp>the</samp>&rsquo;
would be properly contracted. The term <code>largesign</code> is a bit of
braille jargon that pleases braille experts.
</p>
<a name="index-word"></a>
<a name="word-opcode"></a></dd>
<dt><code>word characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word, that
is, are surrounded by whitespace and/or punctuation.
</p>
<a name="index-syllable"></a>
<a name="syllable-opcode"></a></dd>
<dt><code>syllable characters dots</code></dt>
<dd><p>As its name indicates, this opcode defines a &quot;syllable&quot; which must be
represented by exactly the dot patterns given. Contractions may not
cross the boundaries of this &quot;syllable&quot; either from left or right. The
character string defined by this opcode need not be a lexical
syllable, though it usually will be. The equal sign in the following
example means that the the default representation for each character
within the sequence is to be used (see <a href="#Translation-Opcodes">Translation Opcodes</a>):
</p>
<div class="example">
<pre class="example">syllable horse = sawhorse, horseradish
</pre></div>

<a name="index-nocross"></a>
<a name="nocross-opcode"></a></dd>
<dt><code>nocross characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if the characters are all
in one syllable (do not cross a syllable boundary). For this opcode to
work, a hyphenation table must be included. If this is not done,
<code>nocross</code> behaves like the <code>always</code> opcode (see <a href="#always-opcode"><code>always</code></a>). For example, if
the English Grade 2 table is being used and the appropriate
hyphenation table has been included <code>nocross sh 146</code> will cause
the &lsquo;<samp>sh</samp>&rsquo; in &lsquo;<samp>monkshood</samp>&rsquo; not to be contracted.
</p>
<a name="index-joinword"></a>
<a name="joinword-opcode"></a></dd>
<dt><code>joinword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word which
is followed by whitespace and a letter. In addition remove the
whitespace. For example, <samp>en-us-g2.ctb</samp> has <code>joinword to
235</code>. This means that if the word &lsquo;<samp>to</samp>&rsquo; is followed by another
word the contraction is to be used and the space is to be omitted. If
these conditions are not met, the word is translated according to any
other opcodes that may apply to it.
</p>
<a name="index-lowword"></a>
<a name="lowword-opcode"></a></dd>
<dt><code>lowword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are a word
preceded and followed by whitespace. No punctuation either before or
after the word is allowed. The term <code>lowword</code> derives from the
fact that in English these contractions are written in the lower part
of the cell. For example:
</p>
<div class="example">
<pre class="example">lowword were 2356
</pre></div>

<a name="index-contraction"></a>
<a name="contraction-opcode"></a></dd>
<dt><code>contraction characters</code></dt>
<dd><p>If you look at <samp>en-us-g2.ctb</samp> you will see that some words are
actually contracted into some of their own letters. A famous example
among braille transcribers is &lsquo;<samp>also</samp>&rsquo;, which is contracted as
&lsquo;<samp>al</samp>&rsquo;. But this is also the name of a person. To take another
example, &lsquo;<samp>altogether</samp>&rsquo; is contracted as &lsquo;<samp>alt</samp>&rsquo;, but this is
the abbreviation for the alternate key on a computer keyboard.
Similarly &lsquo;<samp>could</samp>&rsquo; is contracted into &lsquo;<samp>cd</samp>&rsquo;, but this is the
abbreviation for compact disk. To prevent confusion in such cases, the
letter sign (see <code>letsign</code> opcode (see <a href="#letsign-opcode"><code>letsign</code></a>)) is placed before such letter
combinations when they actually are abbreviations, not contractions.
The <code>contraction</code> opcode tells the translator to do this.
</p>
<a name="index-sufword"></a>
<a name="sufword-opcode"></a></dd>
<dt><code>sufword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either a word
or at the beginning of a word.
</p>
<a name="index-prfword"></a>
<a name="prfword-opcode"></a></dd>
<dt><code>prfword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either a word
or at the end of a word.
</p>
<a name="index-begword"></a>
<a name="begword-opcode"></a></dd>
<dt><code>begword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the
beginning of a word.
</p>
<a name="index-begmidword"></a>
<a name="begmidword-opcode"></a></dd>
<dt><code>begmidword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either at the
beginning or in the middle of a word.
</p>
<a name="index-midword"></a>
<a name="midword-opcode"></a></dd>
<dt><code>midword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are in the middle
of a word.
</p>
<a name="index-midendword"></a>
<a name="midendword-opcode"></a></dd>
<dt><code>midendword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are either in the
middle or at the end of a word.
</p>
<a name="index-endword"></a>
<a name="endword-opcode"></a></dd>
<dt><code>endword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the end of
a word.
</p>
<a name="index-partword"></a>
<a name="partword-opcode"></a></dd>
<dt><code>partword characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if the characters are
anywhere in a word, that is, if they are proceeded or followed by a
letter.
</p>
<a name="index-exactdots"></a>
<a name="exactdots-opcode"></a></dd>
<dt><code>exactdots @dots</code></dt>
<dd><p>Note that the operand must begin with an at sign (&lsquo;<samp>@</samp>&rsquo;). The dot
pattern following it is evaluated for validity. If it is valid,
whenever an at sign followed by this dot pattern appears in the source
document it is replaced by the characters corresponding to the dot
pattern in the output. This opcode is intended for use in liblouisutdml
semantic-action files to specify exact dot patterns, as in
mathematical codes. For example:
</p>
<div class="example">
<pre class="example">exactdots @4-46-12356
</pre></div>
<p>will produce the characters with these dot patterns in the output.
</p>
<a name="index-prepunc"></a>
<a name="prepunc-opcode"></a></dd>
<dt><code>prepunc characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are part of
punctuation at the beginning of a word.
</p>
<a name="index-postpunc"></a>
<a name="postpunc-opcode"></a></dd>
<dt><code>postpunc characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are part of
punctuation at the end of a word.
</p>
<a name="index-begnum"></a>
<a name="begnum-opcode"></a></dd>
<dt><code>begnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the
beginning of a number, that is, before all its digits. For example, in
<samp>en-us-g1.ctb</samp> we have <code>begnum # 4</code>.
</p>
<a name="index-midnum"></a>
<a name="midnum-opcode"></a></dd>
<dt><code>midnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are in the middle
of a number. For example, <samp>en-us-g1.ctb</samp> has <code>midnum . 46</code>.
This is because the decimal point has a different dot pattern than the
period.
</p>
<a name="index-endnum"></a>
<a name="endnum-opcode"></a></dd>
<dt><code>endnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern if they are at the end of
a number. For example <samp>en-us-g1.ctb</samp> has <code>endnum th 1456</code>.
This handles things like &lsquo;<samp>4th</samp>&rsquo;. A letter sign is <em>NOT</em>
inserted.
</p>
<a name="index-joinnum"></a>
<a name="joinnum-opcode"></a></dd>
<dt><code>joinnum characters dots</code></dt>
<dd><p>Replace the characters with the dot pattern. In addition, if
whitespace and a number follows omit the whitespace. This opcode can
be used to join currency symbols to numbers for example:
</p>
<div class="example">
<pre class="example">joinnum \x20AC 15 (EURO SIGN)
joinnum \x0024 145 (DOLLAR SIGN)
joinnum \x00A3 1234 (POUND SIGN)
joinnum \x00A5 13456 (YEN SIGN)
</pre></div>

</dd>
</dl>

<hr>
<a name="Character_002dClass-Opcodes"></a>
<a name="Character_002dClass-Opcodes-1"></a>
<h3 class="section">2.9 Character-Class Opcodes</h3>

<p>These opcodes define and use character classes. A character class
associates a set of characters with a name. The name then refers to
any character within the class. A character may belong to more than
one class.
</p>
<p>The basic character classes correspond to the character definition
opcodes, with the exception of the <code>uplow</code> opcode (see <a href="#uplow-opcode"><code>uplow</code></a>), which defines
characters belonging to the two classes <code>uppercase</code> and
<code>lowercase</code>. These classes are:
</p>
<dl compact="compact">
<dt><code>space</code></dt>
<dd><p>Whitespace characters such as blank and tab
</p></dd>
<dt><code>digit</code></dt>
<dd><p>Numeric characters
</p></dd>
<dt><code>letter</code></dt>
<dd><p>Both uppercase and lowercase alphabetic characters
</p></dd>
<dt><code>lowercase</code></dt>
<dd><p>Lowercase alphabetic characters
</p></dd>
<dt><code>uppercase</code></dt>
<dd><p>Uppercase alphabetic characters
</p></dd>
<dt><code>punctuation</code></dt>
<dd><p>Punctuation marks
</p></dd>
<dt><code>sign</code></dt>
<dd><p>Signs such as percent (&lsquo;<samp>%</samp>&rsquo;)
</p></dd>
<dt><code>math</code></dt>
<dd><p>Mathematical symbols
</p></dd>
<dt><code>litdigit</code></dt>
<dd><p>Literary digit
</p></dd>
<dt><code>undefined</code></dt>
<dd><p>Not properly defined
</p>
</dd>
</dl>

<p>The opcodes which define and use character classes are shown below.
For examples see <samp>fr-abrege.ctb</samp>.
</p>
<dl compact="compact">
<dd>
<a name="index-class"></a>
<a name="class-opcode"></a></dd>
<dt><code>class name characters</code></dt>
<dd><p>Define a new character class. The characters operand must be specified
as a string. A character class may not be used until it has been
defined.
</p>
<a name="index-after"></a>
<a name="after-opcode"></a></dd>
<dt><code>after class opcode ...</code></dt>
<dd><p>The specified opcode is further constrained in that the matched
character sequence must be immediately preceded by a character
belonging to the specified class. If this opcode is used more than
once on the same line then the union of the characters in all the
classes is used.
</p>
<a name="index-before"></a>
<a name="before-opcode"></a></dd>
<dt><code>before class opcode ...</code></dt>
<dd><p>The specified opcode is further constrained in that the matched
character sequence must be immediately followed by a character
belonging to the specified class. If this opcode is used more than
once on the same line then the union of the characters in all the
classes is used.
</p>
</dd>
</dl>

<hr>
<a name="Swap-Opcodes"></a>
<a name="Swap-Opcodes-1"></a>
<h3 class="section">2.10 Swap Opcodes</h3>

<p>The swap opcodes are needed to tell the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>), the
<code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) and multipass opcodes which dot patterns to swap
for which characters. There are three, <code>swapcd</code>, <code>swapdd</code>
and <code>swapcc</code>. The first swaps dot patterns for characters. The
second swaps dot patterns for dot patterns and the third swaps
characters for characters. The first is used in the <code>context</code>
opcode and the second is used in the multipass opcodes. Dot patterns
are separated by commas and may contain more than one cell.
</p>
<dl compact="compact">
<dd>
<a name="index-swapcd"></a>
<a name="swapcd-opcode"></a></dd>
<dt><code>swapcd name characters dots, dots, dots, ...</code></dt>
<dd><p>See above paragraph for explanation. For example:
</p>
<div class="example">
<pre class="example">swapcd dropped 0123456789 356,2,23,...
</pre></div>

<a name="index-swapdd"></a>
<a name="swapdd-opcode"></a></dd>
<dt><code>swapdd name dots, dots, dots ... dotpattern1, dotpattern2, dotpattern3, ...</code></dt>
<dd><p>The <code>swapdd</code> opcode defines substitutions for the multipass
opcodes. In the second operand the dot patterns must be single cells,
but in the third operand multi-cell dot patterns are allowed. This is
because multi-cell patterns in the second operand would lead to
ambiguities.
</p>
<a name="index-swapcc"></a>
<a name="swapcc-opcode"></a></dd>
<dt><code>swapcc name characters characters</code></dt>
<dd><p>The <code>swapcc</code> opcode swaps characters in its second operand for
characters in the corresponding places in its third operand. It is
intended for use with <code>correct</code> opcodes and can solve problems
such as formatting phone numbers.
</p>
</dd>
</dl>

<hr>
<a name="The-Context-and-Multipass-Opcodes"></a>
<a name="The-Context-and-Multipass-Opcodes-1"></a>
<h3 class="section">2.11 The Context and Multipass Opcodes</h3>

<p>The <code>context</code> and multipass opcodes (<code>pass2</code>, <code>pass3</code>
and <code>pass4</code>) provide translation capabilities beyond those of the
basic translation opcodes (see <a href="#Translation-Opcodes">Translation Opcodes</a>) discussed
previously. The multipass opcodes cause additional passes to be made
over the string to be translated. The number after the word
<code>pass</code> indicates in which pass the entry is to be applied. If no
multipass opcodes are given, only the first translation pass is made.
The <code>context</code> opcode is basically a multipass opcode for the
first pass. It differs slightly from the multipass opcodes per se. The
format of all these opcodes is <code>opcode test action</code>. The specific
opcodes are invoked as follows:
</p>
<dl compact="compact">
<dd><a name="context-opcode"></a><a name="index-context"></a>
<a name="index-pass2"></a>
<a name="index-pass3"></a>
<a name="index-pass4"></a>
</dd>
<dt><code>context test action</code></dt>
<dt><code>pass2 test action</code></dt>
<dt><code>pass3 test action</code></dt>
<dt><code>pass4 test action</code></dt>
</dl>

<p>The <code>test</code> and <code>action</code> operands have suboperands. Each
suboperand begins with a non-alphanumeric character and ends when
another non-alphanumeric character is encountered. The suboperands and
their initial characters are as follows.
</p>
<dl compact="compact">
<dt><kbd>&quot; (double quote)</kbd></dt>
<dd><p>a string of characters. This string must be terminated by another
double quote. It may contain any characters. If a double quote is
needed within the string, it must be preceded by a backslash
(&lsquo;<samp>\</samp>&rsquo;). If a space is needed, it must be represented by the escape
sequence \s. This suboperand is valid only in the test part of the
<code>context</code> opcode.
</p>
</dd>
<dt><kbd>@ (at sign)</kbd></dt>
<dd><p>a sequence of dot patterns. Cells are separated by hyphens as usual.
This suboperand is not valid in the test part of the context and 
correct opcodes.
</p>
</dd>
<dt><kbd>` (accent mark)</kbd></dt>
<dd><p>If this is the beginning of the string being translated this suboperand 
is true. It is valid only in the test part and must be the first thing 
in this operand.
</p>
</dd>
<dt><kbd>~ (tilde)</kbd></dt>
<dd><p>If this is the end of the string being translated this suboperand is 
true. It is valid only in the test part and must be the last thing in 
this operand.
</p>
</dd>
<dt><kbd>$ (dollar sign)</kbd></dt>
<dd><p>a string of attributes, such as &lsquo;<samp>d</samp>&rsquo; for digit, &lsquo;<samp>l</samp>&rsquo; for
letter, etc. More than one attribute can be given. If you wish to
check characters with any attribute, use the letter &lsquo;<samp>a</samp>&rsquo;. Input
characters are checked to see if they have at least one of the
attributes. The attribute string can be followed by numbers specifying
how many characters are to be checked. If no numbers are given, 1 is
assumed. If two numbers separated by a hyphen are given, the input is
checked to make sure that at least the first number of characters with
the attributes are present, but no more than the second number. If
only one number is present, then exactly that many characters must
have the attributes. A period instead of the numbers indicates an
indefinite number of characters (for technical reasons the number of
characters that are actually matched is limited to 65535).
</p>
<p>This suboperand is valid in all test parts but not in action parts.
For the characters which can be used in attribute strings, see the
following table.
</p>
</dd>
<dt><kbd>! (exclamation point)</kbd></dt>
<dd><p>reverses the logical meaning of the suboperand which follows. For
example, !$d is true only if the character is <em>NOT</em> a digit. This
suboperand is valid in test parts only.
</p>
</dd>
<dt><kbd>% (percent sign)</kbd></dt>
<dd><p>the name of a class defined by the <code>class</code> opcode (see <a href="#class-opcode"><code>class</code></a>) or the name of a
swap set defined by the swap opcodes (see <a href="#Swap-Opcodes">Swap Opcodes</a>). Names may
contain only letters. The letters may be upper or
lower-case. The case matters. Class names may be used in test parts
only. Swap names are valid everywhere.
</p>
</dd>
<dt><kbd>{ (left brace)</kbd></dt>
<dd><p>Name: the name of a grouping pair. The left brace indicates that the 
first (or left) member of the pair is to be used in matching. If this is 
between replacement brackets it must be the only item. This is also 
valid in the action part.
</p>
</dd>
<dt><kbd>} (right brace)</kbd></dt>
<dd><p>Name: the name of a grouping pair. The right brace indicates that the 
second (or right) member is to be used in matching. See the remarks on 
the left brace immediately above.
</p>
</dd>
<dt><kbd>/ (slash)</kbd></dt>
<dd><p>Search the input for the expression following the slash and return true 
if found. This can be used to set a variable.
</p>
</dd>
<dt><kbd>_ (underscore)</kbd></dt>
<dd><p>Move backward. If a number follows, move backward that number of
characters. The program never moves backward beyond the beginning of
the input string. This suboperand is valid only in test parts.
</p>
</dd>
<dt><kbd>[ (left bracket)</kbd></dt>
<dd><p>start replacement here. This suboperand must always be paired with a
right bracket and is valid only in test parts. Multiple pairs of
square brackets in a single expression are not allowed.
</p>
</dd>
<dt><kbd>] (right bracket)</kbd></dt>
<dd><p>end replacement here. This suboperand must always be paired with a
left bracket and is valid only in test parts.
</p>
</dd>
<dt><kbd># (number sign or crosshatch)</kbd></dt>
<dd><p>test or set a variable. Variables are referred to by numbers 1 to 50,
for example, <code>#1</code>, <code>#2</code>, <code>#25</code>. Variables may be set by
one <code>context</code> or multipass opcode and tested by another. Thus, an
operation that occurs at one place in a translation can tell an
operation that occurs later about itself. This feature will be used in
math translation, and it may also help to alleviate the need for new
opcodes. This suboperand is valid everywhere.
</p>
<p>Variables are set in the action part. To set a variable use an
expression like <code>#1=1</code>, <code>#2=5</code>, etc. Variables are also
incremented and decremented in the action part with expressions like
<code>#1+</code>, <code>#3-</code>, etc. These operators increment or decrement
the variable by 1.
</p>
<p>Variables are tested in the test part with expressions like
<code>#1=2</code>, <code>#3&lt;4</code>, <code>#5&gt;6</code>, etc.
</p>
</dd>
<dt><kbd>* (asterisk)</kbd></dt>
<dd><p>Copy the characters or dot patterns in the input within the
replacement brackets into the output and discard anything else that
may match. This feature is used, for example, for handling numeric
subscripts in Nemeth. This suboperand is valid only in action parts.
</p>
</dd>
<dt><kbd>? (question mark)</kbd></dt>
<dd><p>Valid only in the action part. The characters to be replaced are
simply ignored. That is, they are replaced with nothing. If either 
member of a grouping pair is in the replace brackets the other member at 
the same level is also removed.
</p>
</dd>
</dl>

<p>The characters which can be used in attribute strings are as follows:
</p>
<dl compact="compact">
<dt><kbd>a</kbd></dt>
<dd><p>any attribute
</p></dd>
<dt><kbd>d</kbd></dt>
<dd><p>digit
</p></dd>
<dt><kbd>D</kbd></dt>
<dd><p>literary digit
</p></dd>
<dt><kbd>l</kbd></dt>
<dd><p>letter
</p></dd>
<dt><kbd>m</kbd></dt>
<dd><p>math
</p></dd>
<dt><kbd>p</kbd></dt>
<dd><p>punctuation
</p></dd>
<dt><kbd>S</kbd></dt>
<dd><p>sign
</p></dd>
<dt><kbd>s</kbd></dt>
<dd><p>space
</p></dd>
<dt><kbd>U</kbd></dt>
<dd><p>uppercase
</p></dd>
<dt><kbd>u</kbd></dt>
<dd><p>lowercase
</p></dd>
<dt><kbd>w</kbd></dt>
<dd><p>first user-defined class
</p></dd>
<dt><kbd>x</kbd></dt>
<dd><p>second user-defined class
</p></dd>
<dt><kbd>y</kbd></dt>
<dd><p>third user-defined class
</p></dd>
<dt><kbd>z</kbd></dt>
<dd><p>fourth user-defined class
</p></dd>
</dl>

<p>The following illustrates the algorithm how text is evaluated with
multipass expressions:
</p>
<p>Loop over context, pass2, pass3 and pass4 and do the following for each pass:
</p>
<ol>
<li> Match the text following the cursor against all expressions in the
current pass
</li><li> If there is no match: shift the cursor one position to the right and
continue the loop
</li><li> If there is a match: choose the longest match
</li><li> Do the replacement (everything between square brackets)
</li><li> Place the cursor after the replaced text
</li><li> continue loop
</li></ol>

<hr>
<a name="The-correct-Opcode"></a>
<a name="The-correct-Opcode-1"></a>
<h3 class="section">2.12 The correct Opcode</h3>

<dl compact="compact">
<dd><a name="index-correct"></a>
<a name="correct-opcode"></a></dd>
<dt><code>correct test action</code></dt>
<dd><p>Because some input (such as that from an OCR program) may contain
systematic errors, it is sometimes advantageous to use a
pre-translation pass to remove them. The errors and their corrections
are specified by the <code>correct</code> opcode. If there are no
<code>correct</code> opcodes in a table, the pre-translation pass is not
used. The format of the <code>correct</code> opcode is very similar to that
of the <code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>). The only difference is that in the action
part strings may be used and dot patterns may not be used. Some
examples of <code>correct</code> opcode entries are:
</p>
<div class="example">
<pre class="example">correct &quot;\\&quot; ? Eliminate backslashes
correct &quot;cornf&quot; &quot;comf&quot; fix a common &quot;scano&quot;
correct &quot;cornm&quot; &quot;comm&quot;
correct &quot;cornp&quot; &quot;comp&quot;
correct &quot;*&quot; ? Get rid of stray asterisks
correct &quot;|&quot; ? ditto for vertical bars
correct &quot;\s?&quot; &quot;?&quot; drop space before question mark
</pre></div>

</dd>
</dl>

<hr>
<a name="Miscellaneous-Opcodes"></a>
<a name="Miscellaneous-Opcodes-1"></a>
<h3 class="section">2.13 Miscellaneous Opcodes</h3>

<dl compact="compact">
<dd><a name="index-include"></a>
<a name="include-opcode"></a></dd>
<dt><code>include filename</code></dt>
<dd><p>Read the file indicated by <code>filename</code> and incorporate or include
its entries into the table. Included files can include other files,
which can include other files, etc. For an example, see what files are
included by the entry include <samp>en-us-g1.ctb</samp> in the table
<samp>en-us-g2.ctb</samp>. If the included file is not in the same directory
as the main table, use a full path name for filename.
</p>
<a name="index-locale"></a>
<a name="locale-opcode"></a></dd>
<dt><code>locale characters</code></dt>
<dd><p>Not implemented, but recognized and ignored for backward
compatibility.
</p>
<a name="index-undefined"></a>
<a name="undefined-opcode"></a></dd>
<dt><code>undefined dots</code></dt>
<dd><p>If this opcode is used in a table any  characters which have not been 
defined in the table but are encountered in the text will be replaced by 
the dot pattern. If this opcode is not used, any undefined characters 
are replaced by <code>'\xhhhh'</code>, where the h&rsquo;s are hexadecimal digits.
</p>
<a name="index-display"></a>
<a name="display-opcode"></a></dd>
<dt><code>display character dots</code></dt>
<dd><p>Associates dot patterns with the characters which will be sent to a
braille embosser, display or screen font. The character must be in the
range 0-255 and the dots must specify a single cell. Here are some
examples:
</p>
<div class="example">
<pre class="example"># When the character a is sent to the embosser or display,
# it will produce a dot 1.
display a 1
</pre></div>

<div class="example">
<pre class="example"># When the character L is sent to the display or embosser
# it will produce dots 1-2-3.
display L 123
</pre></div>

<p>The <code>display</code> opcode is optional. It is used when the embosser or
display has a different mapping of characters to dot patterns than
that given in <a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a>. If used, display
entries must proceed character-definition entries.
</p>
<p>A possible use case would be to define display opcodes so that the
result is Unicode braille for use on a display and a second set of
display opcodes (in a different file) to produce plain ASCII braille
for use with an embosser.
</p>
<a name="index-multind"></a>
<a name="multind-opcode"></a></dd>
<dt><code>multind dots opcode opcode ...</code></dt>
<dd><p>The <code>multind</code> opcode tells the back-translator that a sequence of
braille cells represents more than one braille indicator. For example,
in <samp>en-us-g1.ctb</samp> we have <code>multind 56-6 letsign capsign</code>.
The back-translator can generally handle single braille indicators,
but it cannot apply them when they immediately follow each other. It
recognizes the letter sign if it is followed by a letter and takes
appropriate action. It also recognizes the capital sign if it is
followed by a letter. But when there is a letter sign followed by a
capital sign it fails to recognize the letter sign unless the sequence
has been defined with <code>multind</code>. A <code>multind</code> entry may not
contain a comment because liblouis would attempt to interpret it as an
opcode.
</p>
</dd>
</dl>

<hr>
<a name="Notes-on-Back_002dTranslation"></a>
<a name="Notes-on-Back_002dTranslation-1"></a>
<h2 class="chapter">3 Notes on Back-Translation</h2>

<p>Back-translation is carried out by the function
<code>lou_backTranslateString</code>. Its calling sequence is described in
<a href="#Programming-with-liblouis">Programming with liblouis</a>. Tables containing no
<code>context</code> opcode (see <a href="#context-opcode"><code>context</code></a>), <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) or multipass opcodes can be
used for both forward and backward translation. If these opcodes are
needed different tables will be required.
<code>lou_backTranslateString</code> first performs <code>pass4</code>, if
present, then <code>pass3</code>, then <code>pass2</code>, then the
backtranslation, then corrections. Note that this is exactly the
inverse of forward translation.
</p>
<hr>
<a name="Testing-Translation-Tables-interactively"></a>
<a name="Testing-Translation-Tables-interactively-1"></a>
<h2 class="chapter">4 Testing Translation Tables interactively</h2>

<p>A number of test programs are provided as part of the liblouis
package. They are intended for testing liblouis and for debugging
tables. None of them is suitable for braille transcription. An
application that can be used for transcription is <code>file2brl</code>,
which is part of the liblouisutdml package (see <a href="liblouisutdml.html#Top">Introduction</a> in <cite>Liblouisutdml User&rsquo;s and Programmer&rsquo;s Manual</cite>). The source
code of the test programs can be studied to learn how to use the
liblouis library and they can be used to perform the following
functions.
</p>
<a name="common-options"></a><p>All of these programs recognize the <samp>--help</samp> and
<samp>--version</samp> options.
</p>
<dl compact="compact">
<dt><samp>--help</samp></dt>
<dt><samp>-h</samp></dt>
<dd><p>Print a usage message listing all available options, then exit
successfully.
</p>
</dd>
<dt><samp>--version</samp></dt>
<dt><samp>-v</samp></dt>
<dd><p>Print the version number, then exit successfully.
</p>
</dd>
</dl>


<hr>
<a name="lou_005fdebug"></a>
<a name="lou_005fdebug-1"></a>
<h3 class="section">4.1 lou_debug</h3>
<a name="index-lou_005fdebug"></a>

<p>The <code>lou_debug</code> tool is intended for debugging liblouis
translation tables. The command line for <code>lou_debug</code> is:
</p>
<div class="example">
<pre class="example">lou_debug [OPTIONS] TABLE[,TABLE,...]
</pre></div>

<p>The command line options that are accepted by <code>lou_debug</code> are
described in <a href="#common-options">common options</a>.
</p>
<p>The table (or comma-separated list of tables) is compiled. If no
errors are found a brief command summary is printed, then the prompt
&lsquo;<samp>Command:</samp>&rsquo;. You can then input one of the command letters and get
output, as described below.
</p>
<p>Most of the commands print information in the various arrays of
<code>TranslationTableHeader</code>. Since these arrays are pointers to
chains of hashed items, the commands first print the hash number, then
the first item, then the next item chained to it, and so on. After
each item there is a prompt indicated by &lsquo;<samp>=&gt;</samp>&rsquo;. You can then press
enter (<kbd><span class="key">RET</span></kbd>) to see the next item in the chain or the first
item in the next chain. Or you can press <kbd>h</kbd> (for next-(h)ash) to
skip to the next hash chain. You can also press <kbd>e</kbd> to exit the
command and go back to the &lsquo;<samp>command:</samp>&rsquo; prompt.
</p>
<dl compact="compact">
<dt><kbd>h</kbd></dt>
<dd><p>Brings up a screen of somewhat more extensive help.
</p>
</dd>
<dt><kbd>f</kbd></dt>
<dd><p>Display the first forward-translation rule in the first non-empty hash
bucket. The number of the bucket is displayed at the beginning of the
chain. Each rule is identified by the word &lsquo;<samp>Rule:</samp>&rsquo;. The fields
are displayed by phrases consisting of the name of the field, an equal
sign, and its value. The before and after fields are displayed only if
they are nonzero. Special opcodes such as the <code>correct</code> opcode (see <a href="#correct-opcode"><code>correct</code></a>) and
the multipass opcodes are shown with the code that instructs the
virtual machine that interprets them. If you want to see only the
rules for a particular character string you can type <kbd>p</kbd> at the
&lsquo;<samp>command:</samp>&rsquo; prompt. This will take you to the &lsquo;<samp>particular:</samp>&rsquo;
prompt, where you can press <kbd>f</kbd> and then type in the string. The
whole hash chain containing the string will be displayed.
</p>
</dd>
<dt><kbd>b</kbd></dt>
<dd><p>Display back-translation rules. This display is very similar to that
of forward translation rules except that the dot pattern is displayed
before the character string.
</p>
</dd>
<dt><kbd>c</kbd></dt>
<dd><p>Display character definitions, again within their hash chains.
</p>
</dd>
<dt><kbd>d</kbd></dt>
<dd><p>Displays single-cell dot definitions. If a character-definition opcode
gives a multi-cell dot pattern, it is displayed among the
back-translation rules.
</p>
</dd>
<dt><kbd>C</kbd></dt>
<dd><p>Display the character-to-dots map. This is set up by the
character-definition opcodes and can also be influenced by the
<code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>).
</p>
</dd>
<dt><kbd>D</kbd></dt>
<dd><p>Display the dot to character map, which shows which single-cell dot
patterns map to which characters.
</p>
</dd>
<dt><kbd>z</kbd></dt>
<dd><p>Show the multi-cell dot patterns which have been assigned to the
characters from 0 to 255 to comply with computer braille codes such as
a 6-dot code. Note that the character-definition opcodes should use
8-dot computer braille.
</p>
</dd>
<dt><kbd>p</kbd></dt>
<dd><p>Bring up a secondary (&lsquo;<samp>particular:</samp>&rsquo;) prompt from which you can
examine particular character strings, dot patterns, etc. The commands
(given in its own command summary) are very similar to those of the
main &lsquo;<samp>command:</samp>&rsquo; prompt, but you can type a character string or
dot pattern. They include <kbd>h</kbd>, <kbd>f</kbd>, <kbd>b</kbd>, <kbd>c</kbd>, <kbd>d</kbd>,
<kbd>C</kbd>, <kbd>D</kbd>, <kbd>z</kbd> and <kbd>x</kbd> (to exit this prompt), but not
<kbd>p</kbd>, <kbd>i</kbd> and <kbd>m</kbd>.
</p>
</dd>
<dt><kbd>i</kbd></dt>
<dd><p>Show braille indicators. This shows the dot patterns for various
opcodes such as the <code>capsign</code> opcode (see <a href="#capsign-opcode"><code>capsign</code></a>) and the <code>numsign</code> opcode (see <a href="#numsign-opcode"><code>numsign</code></a>).
It also shows emphasis dot patterns, such as those for the
<code>begemphword</code> opcode (see <a href="#begemphword-opcode"><code>begemphword</code></a>), the <code>begemphphrase</code> opcode (see <a href="#begemphphrase-opcode"><code>begemphphrase</code></a>), etc. If a
given opcode has not been used nothing is printed for it.
</p>
</dd>
<dt><kbd>m</kbd></dt>
<dd><p>Display various miscellaneous information about the table, such as the
number of passes, whether certain opcodes have been used, and whether
there is a hyphenation table.
</p>
</dd>
<dt><kbd>q</kbd></dt>
<dd><p>Exit the program.
</p></dd>
</dl>

<hr>
<a name="lou_005ftrace"></a>
<a name="lou_005ftrace-1"></a>
<h3 class="section">4.2 lou_trace</h3>
<a name="index-lou_005ftrace"></a>

<p>When working on translation tables it is sometimes useful to determine
what rules were applied when translating a string. <code>lou_trace</code>
helps with exactly that. It list all the the applied rules for a given
translation table and an input string.
</p>
<div class="example">
<pre class="example">lou_trace [OPTIONS] TABLE[,TABLE,...]
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>)
<code>lou_trace</code> also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--forward</samp></dt>
<dt><samp>-f</samp></dt>
<dd><p>Trace a forward translation.
</p>
</dd>
<dt><samp>--backward</samp></dt>
<dt><samp>-b</samp></dt>
<dd><p>Trace a backward translation.
</p>
</dd>
</dl>

<p>If no options are given forward translation is assumed.
</p>
<p>Once started you can type an input string followed by <kbd><span class="key">RET</span></kbd>.
<code>lou_trace</code> will print the braille translation followed by
list of rules that were applied to produce the translation. A possible
invocation is listed in the following example:
</p>
<div class="example">
<pre class="example">$ lou_trace tables/en-us-g2.ctb 
the u.s. postal service
! u4s4 po/al s}vice
1.      largesign       the     2346
2.      repeated                0
3.      lowercase       u       136
4.      punctuation     .       46
5.      context _$l[&quot;.&quot;]$l      @256
6.      lowercase       s       234
7.      postpunc        .       256
8.      repeated                0
9.      begword post    1234-135-34
10.     largesign       a       1
11.     lowercase       l       123
12.     repeated                0
13.     lowercase       s       234
14.     always  er      12456
15.     lowercase       v       1236
16.     lowercase       i       24
17.     lowercase       c       14
18.     lowercase       e       15
19.     pass2   $s1-10  @0
20.     pass2   $s1-10  @0
21.     pass2   $s1-10  @0
</pre></div>

<hr>
<a name="lou_005fchecktable"></a>
<a name="lou_005fchecktable-1"></a>
<h3 class="section">4.3 lou_checktable</h3>
<a name="index-lou_005fchecktable"></a>

<p>To use this program type the following:
</p>
<div class="example">
<pre class="example">lou_checktable [OPTIONS] TABLE
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>)
<code>lou_checktable</code> also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--quiet</samp></dt>
<dt><samp>-q</samp></dt>
<dd><p>Do not write to standard error if there are no errors.
</p>
</dd>
</dl>

<p>If the table contains errors, appropriate messages will be displayed.
If there are no errors the message &lsquo;<samp>no errors found.</samp>&rsquo; will be
shown.
</p>
<hr>
<a name="lou_005fallround"></a>
<a name="lou_005fallround-1"></a>
<h3 class="section">4.4 lou_allround</h3>
<a name="index-lou_005fallround"></a>

<p>This program tests every capability of the liblouis library. It is
completely interactive. Invoke it as follows:
</p>
<div class="example">
<pre class="example">lou_allround [OPTIONS]
</pre></div>

<p>The command line options that are accepted by <code>lou_allround</code>
are described in <a href="#common-options">common options</a>.
</p>
<p>You will see a few lines telling you how to use the program. Pressing
one of the letters in parentheses and then enter will take you to a
message asking for more information or for the answer to a yes/no
question. Typing the letter &lsquo;<samp>r</samp>&rsquo; and then <tt class="key">RET</tt> will take you
to a screen where you can enter a line to be processed by the library
and then view the results.
</p>
<hr>
<a name="lou_005ftranslate-_0028program_0029"></a>
<a name="lou_005ftranslate-1"></a>
<h3 class="section">4.5 lou_translate</h3>
<a name="index-lou_005ftranslate-1"></a>

<p>This program translates whatever is on the standard input unit and
prints it on the standard output unit. It is intended for large-scale
testing of the accuracy of translation and back-translation. The
command line for <code>lou_translate</code> is:
</p>
<div class="example">
<pre class="example">lou_translate [OPTION] TABLE[,TABLE,...]
</pre></div>

<p>Aside from the standard options (see <a href="#common-options">common options</a>) this program
also accepts the following options:
</p>
<dl compact="compact">
<dt><samp>--forward</samp></dt>
<dt><samp>-f</samp></dt>
<dd><p>Do a forward translation.
</p>
</dd>
<dt><samp>--backward</samp></dt>
<dt><samp>-b</samp></dt>
<dd><p>Do a backward translation.
</p>
</dd>
</dl>

<p>To use it to translate or back-translate a file use a line like
</p>
<div class="example">
<pre class="example">lou_translate --forward en-us-g2.ctb &lt;liblouis.txt &gt;testtrans
</pre></div>

<hr>
<a name="lou_005fcheckhyphens"></a>
<a name="lou_005fcheckhyphens-1"></a>
<h3 class="section">4.6 lou_checkhyphens</h3>
<a name="index-lou_005fcheckhyphens"></a>

<p>This program checks the accuracy of hyphenation in Braille translation
for both translated and untranslated words. It is completely
interactive. Invoke it as follows:
</p>
<div class="example">
<pre class="example">lou_checkhyphens [OPTIONS]
</pre></div>

<p>The command line options that are accepted by
<code>lou_checkhyphens</code> are described in <a href="#common-options">common options</a>.
</p>
<p>You will see a few lines telling you how to use the program.
</p>
<hr>
<a name="Automated-Testing-of-Translation-Tables"></a>
<a name="Automated-Testing-of-Translation-Tables-1"></a>
<h2 class="chapter">5 Automated Testing of Translation Tables</h2>

<p>There are a number of automated tests for liblouis and they are
proving to be of tremendous value. When changing the code the
developers can run the tests to see if anything broke.
</p>
<p>The easiest way to test the translation tables is to write a YAML file
where you define the table that is to be tested and any number of
words or phrases to translate together with their respective expected
translation.
</p>
<p>The YAML based tests replace older methods for testing the translation
tables which only work with Python and when compiled with UCS4. They
are deprecated and will be removed in a future release.
</p>
<dl compact="compact">
<dt>YAML tests</dt>
<dd><p>The YAML tests are data driven, i.e. you give the test data, a string
to translate and the expected output. The data is in a standard format
namely YAML. If you have <samp>libyaml</samp> installed they will
automatically be invoked as part of the standard <code>make check</code>
command.
</p>
</dd>
<dt>Doctests</dt>
<dd><p>The doctests are based on a technology used in Python where you define
your tests as if you were sitting at a terminal session with a Python
interpreter. They only work with either Python2 and Python3 but not
from plain C, so you need Python and you will have to compile with
UCS4.
</p></dd>
</dl>


<hr>
<a name="YAML-Tests"></a>
<a name="YAML-Tests-1"></a>
<h3 class="section">5.1 YAML Tests</h3>

<p><a href="http://yaml.org/">YAML</a> is a human readable data serialization
format that allows for an easy and compact way to define tests.
</p>
<p>A YAML file first defines which tables are to be used for the tests.
Then it optionally defines flags such as the &lsquo;<samp>testmode</samp>&rsquo;. Finally
all the tests are defined.
</p>
<p>Let&rsquo;s just look at a simple example how tests could be defined:
</p>

<div class="example">
<pre class="example"># comments start with '#' anywhere on a line
# first define which tables will be used for your tests
tables: [unicode.dis, en-ueb-g1.ctb]

# then optionally define flags such as testmode. If no flags are
# defined forward translation is assumed

# now define the tests
tests:
  - # each test is a list.
    # The first item is the string to translate. Quoting of strings is
    # optional
    - hello
    # The second item is the expected translation
    - ⠓⠑⠇⠇⠕
  - # optionally you can define additional parameters in a third
    # item such as typeform or expected failure, etc
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - {typeform: {italic: '++++ '}, xfail: true}
  - # a simple, no-frills test
    - Good bye
    - ⠠⠛⠕⠕⠙ ⠃⠽⠑
  # same as above using &quot;flow style&quot; notation
  - [Good bye,  ⠠⠛⠕⠕⠙ ⠃⠽⠑]
</pre></div>

<p>The three basic components of a test file are as follows:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>tables</samp>&rsquo;</dt>
<dd><p>A list containing table names, which the tests should be run against.
This is usually just one table, but for some situations more than one
table can be required.
</p>
<p>To test the <samp>en-ueb-g1.ctb</samp> table using unicode braille you could
use the following definition:
</p>
<div class="example">
<pre class="example">tables: [unicode.dis, en-ueb-g1.ctb]
</pre></div>

<p>If you wanted to test the <samp>eo-g1.ctb</samp> table using brf notation
then you would use the following definition:
</p>
<div class="example">
<pre class="example">tables: [en-us-brf.dis, eo-g1.ctb]
</pre></div>

</dd>
<dt>&lsquo;<samp>flags</samp>&rsquo;</dt>
<dd><p>The flags that apply for all tests in this file. At the moment only
the &lsquo;<samp>testmode</samp>&rsquo; flag is supported. It can have three possible
values:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>forward</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for forward translation
</p></dd>
<dt>&lsquo;<samp>backward</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for backward translation
</p></dd>
<dt>&lsquo;<samp>hyphenate</samp>&rsquo;</dt>
<dd><p>This indicates that the tests are for hyphenation
</p></dd>
</dl>

<p>If no flags are defined forward translation is assumed.
</p>
</dd>
<dt>&lsquo;<samp>tests</samp>&rsquo;</dt>
<dd><p>A list of tests. Each test consists of a list of two, three or in some
cases even four items. The first item is the unicode text to be
tested. The second item is the expected braille output. This can be
either unicode braille or an ASCII-braille like encoding. Quoting
strings is optional. Comments can be inserted almost anywhere using
the &lsquo;<samp>#</samp>&rsquo; sign. A simple test would look at follows:
</p>
<div class="example">
<pre class="example">  - # a simple, no-frills test
    - Good bye
    - ⠠⠛⠕⠕⠙ ⠃⠽⠑
</pre></div>

<p>Using the more compact &ldquo;flow style&rdquo; notation it would look like the
following:
</p>
<div class="example">
<pre class="example">  - [Good bye, ⠠⠛⠕⠕⠙ ⠃⠽⠑]
</pre></div>

<p>An optional third item can contain additional options for a test such
as the typeform, or whether a test is expected to fail. The following
shows a typical example:
</p>
<div class="example">
<pre class="example">  -
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - {typeform: {italic: '++++ '}, xfail: true}
  # same test more compact
  - [Hello, ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄, {typeform: {italic: '++++ '}, xfail: true}]
</pre></div>

<p>The valid additional options for a test are as follows:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>xfail</samp>&rsquo;</dt>
<dd><p>Whether a test is expected to fail. If you expect a test to fail, set
this to &lsquo;<samp>true</samp>&rsquo;. If you prefer you can also specify a reason for
the failure:
</p>
<div class="example">
<pre class="example">  - [Hello, ⠨, {xfail: Test case is not complete}]
</pre></div>

<p>If you expect a test case to pass then just don&rsquo;t mark it with
&lsquo;<samp>xfail</samp>&rsquo; or if you really have to, set &lsquo;<samp>xfail</samp>&rsquo; to
&lsquo;<samp>false</samp>&rsquo; or &lsquo;<samp>off</samp>&rsquo;.
</p>
</dd>
<dt>&lsquo;<samp>typeform</samp>&rsquo;</dt>
<dd><p>The typeform used for a translation. It consists of one or more
emphasis specifications. For each character in the specifications that
is not a space the corresponding emphasis will be set. Valid options
for emphasis are &lsquo;<samp>italic</samp>&rsquo;, &lsquo;<samp>underline</samp>&rsquo;, &lsquo;<samp>bold</samp>&rsquo;,
&lsquo;<samp>computer_braille</samp>&rsquo;, &lsquo;<samp>passage_break</samp>&rsquo;, &lsquo;<samp>word_reset</samp>&rsquo;,
&lsquo;<samp>script</samp>&rsquo;, &lsquo;<samp>trans_note</samp>&rsquo;, &lsquo;<samp>trans_note_1</samp>&rsquo;,
&lsquo;<samp>trans_note_2</samp>&rsquo;, &lsquo;<samp>trans_note_3</samp>&rsquo;, &lsquo;<samp>trans_note_4</samp>&rsquo; or
&lsquo;<samp>trans_note_5</samp>&rsquo;. The following shows an example where both
&lsquo;<samp>italic</samp>&rsquo; and &lsquo;<samp>underline</samp>&rsquo; are specified:
</p>
<div class="example">
<pre class="example">  -
    - Hello
    - ⠨⠶⠠⠓⠑⠇⠇⠕⠨⠄
    - typeform:
        italic:    '++++ '
        underline: '    +'
</pre></div>

</dd>
<dt>&lsquo;<samp>cursorPos</samp>&rsquo;</dt>
<dd><p>A list of cursor positions for each input position. Useful when
simulating screen reader interaction, to debug contraction and cursor
behavior as in the following example from the <samp>en-GB-g2.ctb</samp>
test. Also note that in this example the additional options are not
passed in using the &ldquo;flow style&rdquo; notation.
</p>
<div class="example">
<pre class="example">  -
    - you went to
    - ⠽ ⠺⠑⠝⠞ ⠞⠕
    - mode: [compbrlAtCursor]
      cursorPos: [0,1,2,3,4,5,6,7,8,9,10]
</pre></div>

</dd>
<dt>&lsquo;<samp>mode</samp>&rsquo;</dt>
<dd><p>A list of translation modes that should be used for this test. If not
defined defaults to 0. Valid mode values are &lsquo;<samp>noContractions</samp>&rsquo;,
&lsquo;<samp>compbrlAtCursor</samp>&rsquo;, &lsquo;<samp>dotsIO</samp>&rsquo;, &lsquo;<samp>comp8Dots</samp>&rsquo;,
&lsquo;<samp>pass1Only</samp>&rsquo;, &lsquo;<samp>compbrlLeftCursor</samp>&rsquo;, &lsquo;<samp>otherTrans</samp>&rsquo;or
&lsquo;<samp>ucBrl</samp>&rsquo;.
</p></dd>
</dl>

</dd>
</dl>

<a name="Optional-test-description"></a>
<h4 class="subsection">5.1.1 Optional test description</h4>
<p>When a test contains three or four items the first item is assumed to
be a test description, the second item is the unicode text to be
tested and the third item is the expected braille output. Again an
optional fourth item can contain additional options for the test. The
following shows an example:
</p>
<div class="example">
<pre class="example">  -
    - Number-text-transitions with italic
    - 123abc
    - ⠼⠁⠃⠉⠨⠶⠰⠁⠃⠉⠨⠄
    - {typeform: '000111'}
</pre></div>

<p>In case the test fails the description will be printed together with
the expected and the actual braille output.
</p>
<p>For more examples and inspiration please see the YAML tests
(<samp>*.yaml</samp>) in the <samp>tests</samp> directory of the source
distribution.
</p>
<hr>
<a name="Doctests"></a>
<a name="Doctests-1"></a>
<h3 class="section">5.2 Doctests</h3>
<p>A doctest looks like you typed a command at the Python command line
and got some output, e.g.
</p>
<div class="example">
<pre class="example">&gt;&gt;&gt; translate(['table.ctb'], &quot;Hello&quot;, mode=compbrlLeftCursor)
(&quot;HELLO&quot;, [0,1,2,3], [0,1,2,3], 0)
</pre></div>

<p>There is a convenience wrapper which hides away much of the complexity
of above example so you can write stuff like 
</p>
<div class="example">
<pre class="example">&gt;&gt;&gt; t.braille('the cat sat on the mat')
u'! cat sat on ! mat'
</pre></div>

<p>Essentially you are writing code, so the doctests allow you to do more
flexible tests that are much closer to the raw iron than any of the
other tests. However the doctests will only work in either Python2 or
Python3.
</p>
<p>For examples on how to create doctests please see <samp>*_test.txt</samp> in
the doctest directory in the source distribution.
</p>
<hr>
<a name="Programming-with-liblouis"></a>
<a name="Programming-with-liblouis-1"></a>
<h2 class="chapter">6 Programming with liblouis</h2>


<hr>
<a name="Overview-_0028library_0029"></a>
<a name="Overview-2"></a>
<h3 class="section">6.1 Overview</h3>

<p>You use the liblouis library by calling the following functions,
<code>lou_translateString</code>, <code>lou_backTranslateString</code>,
<code>lou_translate</code>, <code>lou_backTranslate</code>,
<code>lou_registerLogCallback</code>, <code>lou_setLogLevel</code>,
<code>lou_logFile</code>, <code>lou_logPrint</code>, <code>lou_logEnd</code>,
<code>lou_getTable</code>, <code>lou_checkTable</code>, <code>lou_hyphenate</code>,
<code>lou_charToDots</code>, <code>lou_dotsToChar</code>,
<code>lou_compileString</code>, <code>lou_getTypeformForEmphClass</code>,
<code>lou_readCharFromFile</code>, <code>lou_version</code> and <code>lou_free</code>.
These are described below. The header file, <samp>liblouis.h</samp>, also
contains brief descriptions. Liblouis is written in straight C. It has
four code modules, <samp>compileTranslationTable.c</samp>, <samp>logging.c</samp>,
<samp>lou_translateString.c</samp> and <samp>lou_backTranslateString.c</samp>. In
addition, there are two header files, <samp>liblouis.h</samp>, which defines
the API, and <samp>louis.h</samp>, used only internally and by
liblouisutdml. The latter includes <samp>liblouis.h</samp>.
</p>
<p>Persons who wish to use liblouis from Python may want to skip ahead to
<a href="#Python-bindings">Python bindings</a>.
</p>
<p><samp>compileTranslationTable.c</samp> keeps track of all translation tables
which an application has used. It is called by the translation,
hyphenation and checking functions when they start. If a table has not
yet been compiled <samp>compileTranslationTable.c</samp> checks it for
correctness and compiles it into an efficient internal representation.
The main entry point is <code>lou_getTable</code>. Since it is the module
that keeps track of memory usage, it also contains the <code>lou_free</code>
function. In addition, it contains the <code>lou_checkTable</code> function,
plus some utility functions which are used by the other modules.
</p>
<p>By default, liblouis handles all characters internally as 16-bit
unsigned integers. It can be compiled for 32-bit characters as
explained below. The meanings of these integers are not hard-coded.
Rather they are defined by the character-definition opcodes. However,
the standard printable characters, from decimal 32 to 126 are
recognized for the purpose of processing the opcodes. Hence, the
following definition is included in <samp>liblouis.h</samp>. It is correct
for computers with at least 32-bit processors.
</p>
<div class="example">
<pre class="example">#define widechar unsigned short int
</pre></div>

<p>To make liblouis handle 32-bit Unicode simply remove the word
<code>short</code> in the above <code>define</code>. This will cause the translate and
back-translate functions to expect input in 32-bit form and to deliver
their output in this form. The input to the compiler (tables) is
unaffected except that two new escape sequences for 20-bit and 32-bit
characters are recognized.
</p>
<p>Here are the definitions of the eleven liblouis functions and their
parameters. They are given in terms of 16-bit Unicode. If liblouis has
been compiled for 32-bit Unicode simply read 32 instead of 16.
</p>
<hr>
<a name="Data-structure-of-liblouis-tables"></a>
<a name="Data-structure-of-liblouis-tables-1"></a>
<h3 class="section">6.2 Data structure of liblouis tables</h3>

<p>The data structure <code>TranslationTableHeader</code> is defined by a
<code>typedef</code> statement in <samp>louis.h</samp>. To find the beginning,
search for the word &lsquo;<samp>header</samp>&rsquo;. As its name implies, this is
actually the table header. Data are placed in the <code>ruleArea</code>
array, which is the last item defined in this structure. This array is
declared with a length of 1 and is expanded as needed. The table
header consists mostly of arrays of pointers of size <code>HASHNUM</code>.
These pointers are actually offsets into <code>ruleArea</code> and point to
chains of items which have been placed in the same hash bucket by a
simple hashing algorithm. <code>HASHNUM</code> should be a prime and is
currently 1123. The structure of the table was chosen to optimize
speed rather than memory usage.
</p>
<p>The first part of the table contains miscellaneous information, such
as the number of passes and whether various opcodes have been used. It
also contains the amount of memory allocated to the table and the
amount actually used.
</p>
<p>The next section contains pointers to various braille indicators and
begins with <code>capitalSign</code>. The rules pointed to contain the 
dot pattern for the indicator and an opcode which is used by the
back-translator but does not appear in the list of opcodes. The
braille indicators also include various kinds of emphasis, such as
italic and bold and information about the length of emphasized
phrases. The latter is contained directly in the table item instead of
in a rule.
</p>
<p>After the braille indicators comes information about when a letter
sign should be used.
</p>
<p>Next is an array of size <code>HASHNUM</code> which points to character
definitions. These are created by the character-definition opcodes.
</p>
<p>Following this is a similar array pointing to definitions of
single-cell dot patterns. This is also created from the
character-definition opcodes. If a character definition contains a
multi-cell dot pattern this is compiled into ordinary forward and
backward rules. If such a multi-cell dot pattern contains a single
cell which has not previously been defined that cell is placed in this
array, but is given the attribute <code>space</code>.
</p>
<p>Next come arrays that map characters to single-cell dot patterns and
dots to characters. These are created from both character-definition
opcodes and display opcodes.
</p>
<p>Next is an array of size 256 which maps characters in this range to
dot patterns which may consist of multiple cells. It is used, for
example, to map &lsquo;<samp>{</samp>&rsquo; to dots 456-246. These mappings are created
by the <code>compdots</code> 
or the <code>comp6</code> opcode (see <a href="#comp6-opcode"><code>comp6</code></a>).
</p>
<p>Next are two small arrays that held pointers to chains of rules
produced by the <code>swapcd</code> opcode (see <a href="#swapcd-opcode"><code>swapcd</code></a>) and the <code>swapdd</code> opcode (see <a href="#swapdd-opcode"><code>swapdd</code></a>) and by
some multipass, <code>context</code> and <code>correct</code> opcodes.
</p>
<p>Now we get to an array of size <code>HASHNUM</code> which points to chains
of rules for forward translation.
</p>
<p>Following this is a similar array for back-translation.
</p>
<p>Finally is the <code>ruleArea</code>, an array of variable size to which
various structures are mapped and to which almost everything else
points.
</p>
<hr>
<a name="lou_005fversion"></a>
<a name="lou_005fversion-1"></a>
<h3 class="section">6.3 lou_version</h3>
<a name="index-lou_005fversion"></a>

<div class="example">
<pre class="example">char *lou_version ()
</pre></div>

<p>This function returns a pointer to a character string containing the
version of liblouis, plus other information, such as the release date
and perhaps notable changes.
</p>
<hr>
<a name="lou_005ftranslateString"></a>
<a name="lou_005ftranslateString-1"></a>
<h3 class="section">6.4 lou_translateString</h3>
<a name="index-lou_005ftranslateString"></a>

<div class="example">
<pre class="example">int lou_translateString(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int mode);
</pre></div>

<p>This function takes a string of 16-bit Unicode characters in
<code>inbuf</code> and translates it into a string of 16-bit characters in
<code>outbuf</code>. Each 16-bit character produces a particular dot pattern
in one braille cell when sent to an embosser or braille display or to
a screen type font. Which 16-bit character represents which dot pattern
is indicated by the character-definition and display opcodes in the
translation table.
</p>
<a name="translation_002dtables"></a><p>The <code>tableList</code> parameter points to a list of translation tables
separated by commas. If only one table is given, no comma should be
used after it. It is these tables which control just how the
translation is made, whether in Grade 2, Grade 1, or something else.
</p>
<p>liblouis knows where to find all the tables that have been distributed
with it. So you can just give a table name such as <code>en-us-g2.ctb</code>
and liblouis will load it. You can also give a table name which
includes a path. If this is the first table in a list, all the tables
in the list must be on the same path. You can specify a path on which
liblouis will look for table names by setting the environment variable
<code>LOUIS_TABLEPATH</code>. This environment variable can contain one or
more paths separated by commas. On receiving a table name liblouis
first checks to see if it can be found on any of these paths. If not,
it then checks to see if it can be found in the current directory, or,
if the first (or only) name in a table list, if it contains a
path name, can be found on that path. If not, it checks to see if it
can be found on the path where the distributed tables have been
installed. If a table has already been loaded and compiled this
path-checking is skipped.
</p>
<p>The tables in a list are all compiled into the same internal table.
The list is then regarded as the name of this table. As explained in
<a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a>, each table is a file which may
be plain text, big-endian Unicode or little-endian Unicode. A table
(or list of tables) is compiled into an internal representation the
first time it is used. Liblouis keeps track of which tables have been
compiled. For this reason, it is essential to call the <code>lou_free</code>
function at the end of your application to avoid memory leaks. Do
<em>NOT</em> call <code>lou_free</code> after each translation. This will
force liblouis to compile the translation tables each time they are
used, leading to great inefficiency.
</p>
<p>Note that both the <code>*inlen</code> and <code>*outlen</code> parameters are
pointers to integers. When the function is called, these integers
contain the maximum input and output lengths, respectively. When it
returns, they are set to the actual lengths used.
</p>
<p>The <code>typeform</code> parameter is used to indicate italic type,
boldface type, computer braille, etc. It is an array of <code>formtype</code>
with the same length as the input buffer pointed to by <code>*inbuf</code>.
However, it is used to pass back character-by-character results, so
enough space must be provided to match the <code>*outlen</code> parameter.
Each element indicates the typeform of the corresponding character
in the input buffer. The values and their meaning can be consulted in the
<code>typeforms</code> enum in <samp>liblouis.h</samp>. These values can be
added for multiple emphasis. If this parameter is <code>NULL</code>, no
checking for type forms is done. In addition, if this parameter is not
<code>NULL</code>, it is set on return to have an 8 at every position
corresponding to a character in <code>outbuf</code> which was defined to
have a dot representation containing dot 7, dot 8 or both, and to 0
otherwise.
</p>
<p>The <code>spacing</code> parameter is used to indicate differences in
spacing between the input string and the translated output string. It
is also of the same length as the string pointed to by <code>*inbuf</code>.
If this parameter is <code>NULL</code>, no spacing information is computed.
</p>
<p>The <code>mode</code> parameter specifies how the translation should be
done. The valid values of mode are listed in <samp>liblouis.h</samp>. They
are all powers of 2, so that a combined mode can be specified by
adding up different values.
</p>
<p>The function returns 1 if no errors were encountered and 0 if a
complete translation could not be done.
</p>
<hr>
<a name="lou_005ftranslate"></a>
<a name="lou_005ftranslate-2"></a>
<h3 class="section">6.5 lou_translate</h3>
<a name="index-lou_005ftranslate"></a>

<div class="example">
<pre class="example">int lou_translate(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int *outputPos,
  int *inputPos,
  int *cursorPos,
  int mode);
</pre></div>

<p>This function adds the parameters <code>outputPos</code>, <code>inputPos</code>
and <code>cursorPos</code>, to facilitate use in screen reader programs. The
<code>outputPos</code> parameter must point to an array of integers with at
least <code>inlen</code> elements. On return, this array will contain the
position in <code>outbuf</code> corresponding to each input position.
Similarly, <code>inputPos</code> must point to an array of integers of at
least <code>outlen</code> elements. On return, this array will contain the
position in <code>inbuf</code> corresponding to each position in
<code>outbuf</code>. <code>cursorPos</code> must point to an integer containing
the position of the cursor in the input. On return, it will contain
the cursor position in the output. Any parameter after <code>outlen</code>
may be <code>NULL</code>. In this case, the actions corresponding to it will
not be carried out. The <code>mode</code> parameter, however, must be
present and must be an integer, not a pointer to an integer. If the
<code>compbrlAtCursor</code> bit is set in the <code>mode</code> parameter the
space-bounded characters containing the cursor will be translated in
computer braille. If the <code>compbrlLeftCursor</code> bit is set only the
characters to the left of the cursor will be in computer braille. This
bit overrides <code>compbrlAtCursor</code>. When the <code>dotsIO</code> bit is
set, during translation, produce output as dot patterns. During
back-translation accept input as dot patterns. Note that the produced
dot patterns are affected if you have any <code>display</code> opcode (see <a href="#display-opcode"><code>display</code></a>) defined
in any of your tables. The <code>ucBrl</code> (Unicode Braille) bit is used
by <code>lou_charToDots</code> and <code>lou_translate</code>. It causes the dot
patterns to be Unicode Braille rather than the liblouis
representation. Note that you will not notice any change when setting
<code>ucBrl</code> unless <code>dotsIO</code> is also set. <code>lou_dotsToChar</code>
and <code>lou_backTranslate</code> recognize Unicode braille automatically.
</p>
<p>The <code>otherTrans</code> mode needs special description. If it is set 
liblouis will attempt to call a wrapper for another translator. These 
other translators are usually for Asian languages. The calling sequence 
is the same as for liblouis itself except that the <code>trantab</code> 
parameter gives the name of the other translator, possibly abbreviated, 
followed by a colon, followed by whatever other information the other 
translator needs. This is specific for each translator. If no such 
information is needed the colon should be omitted. The result of calling 
either the translate or back-translate functions with this mode bit set 
will be the same as calling without it set. That is, the wrapper for the 
other translator simulates a call to liblouis. Note that the wrappers 
are not implemented at this time. Setting this mode bit will result in 
failure (return value of 0).
</p>
<hr>
<a name="lou_005fbackTranslateString"></a>
<a name="lou_005fbackTranslateString-1"></a>
<h3 class="section">6.6 lou_backTranslateString</h3>
<a name="index-lou_005fbackTranslateString"></a>

<div class="example">
<pre class="example">int lou_backTranslateString(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int mode);
</pre></div>

<p>This is exactly the opposite of <code>lou_translateString</code>.
<code>inbuf</code> is a string of 16-bit Unicode characters representing
braille. <code>outbuf</code> will contain a string of 16&ndash;bit Unicode
characters. <code>typeform</code> will indicate any emphasis found in the
input string, while <code>spacing</code> will indicate any differences in
spacing between the input and output strings. The <code>typeform</code> and
<code>spacing</code> parameters may be <code>NULL</code> if this information is
not needed. <code>mode</code> again specifies how the back-translation
should be done.
</p>
<hr>
<a name="lou_005fbackTranslate"></a>
<a name="lou_005fbackTranslate-1"></a>
<h3 class="section">6.7 lou_backTranslate</h3>
<a name="index-lou_005fbackTranslate"></a>

<div class="example">
<pre class="example">int lou_backTranslate(
  const char *tableList,
  const widechar *inbuf,
  int *inlen,
  widechar *outbuf,
  int *outlen,
  formtype *typeform,
  char *spacing,
  int *outputPos,
  int *inputPos,
  int *cursorPos,
  int mode);
</pre></div>

<p>This function is exactly the inverse of <code>lou_translate</code>.
</p>
<hr>
<a name="lou_005fhyphenate"></a>
<a name="lou_005fhyphenate-1"></a>
<h3 class="section">6.8 lou_hyphenate</h3>
<a name="index-lou_005fhyphenate"></a>

<div class="example">
<pre class="example">int lou_hyphenate (
  const char *tableList,
  const widechar *inbuf,
  int inlen,
  char *hyphens,
  int mode);
</pre></div>

<p>This function looks at the characters in <code>inbuf</code> and if it finds
a sequence of letters attempts to hyphenate it as a word. Note that
lou_hyphenate operates on single words only, and spaces or punctuation
marks between letters are not allowed. Leading and trailing
punctuation marks are ignored. The table named by the <code>tableList</code>
parameter must contain a hyphenation table. If it does not, the
function does nothing. <code>inlen</code> is the length of the character
string in <code>inbuf</code>. <code>hyphens</code> is an array of characters and
must be of size <code>inlen</code> + 1 (to account for the NULL terminator).
If hyphenation is successful it will have a 1 at the beginning of each
syllable and a 0 elsewhere. If the <code>mode</code> parameter is 0
<code>inbuf</code> is assumed to contain untranslated characters. Any
nonzero value means that <code>inbuf</code> contains a translation. In this
case, it is back-translated, hyphenation is performed, and it is
re-translated so that the hyphens can be placed correctly. The
<code>lou_translate</code> and <code>lou_backTranslate</code> functions are used
in this process. <code>lou_hyphenate</code> returns 1 if hyphenation was
successful and 0 otherwise. In the latter case, the contents of the
<code>hyphens</code> parameter are undefined. This function was provided for
use in liblouisutdml.
</p>
<hr>
<a name="lou_005fcompileString"></a>
<a name="lou_005fcompileString-1"></a>
<h3 class="section">6.9 lou_compileString</h3>
<a name="index-lou_005fcompileString"></a>

<div class="example">
<pre class="example">int lou_compileString (const char *tableList, const char *inString)
</pre></div>

<p>This function enables you to compile a table entry on the fly at 
run-time. The new entry is added to <code>tableList</code> and remains in force 
until <code>lou_free</code> is called. If <code>tableList</code> has not previously 
been loaded it is loaded and compiled. <code>inString</code> contains the 
table entry to be added. It may be anything valid. Error messages 
will be produced if it is invalid. The function returns 1 on success and 
0 on failure.
</p>
<hr>
<a name="lou_005fgetTypeformForEmphClass"></a>
<a name="lou_005fgetTypeformForEmphClass-1"></a>
<h3 class="section">6.10 lou_getTypeformForEmphClass</h3>
<a name="index-lou_005fgetTypeformForEmphClass"></a>

<div class="example">
<pre class="example">int lou_getTypeformForEmphClass (const char *tableList, const char *emphClass);
</pre></div>

<p>This function returns the typeform bit associated with the given
emphasis class. If the emphasis class is undefined this function
returns <code>0</code>. If errors are found error messages are logged to the
log callback (see <code>lou_registerLogCallback</code>) and the return value
is <code>0</code>. <code>tableList</code> is a list of names of table files
separated by commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). <code>emphClass</code> is the name of an
emphasis class.
</p>
<hr>
<a name="lou_005fdotsToChar"></a>
<a name="lou_005fdotsToChar-1"></a>
<h3 class="section">6.11 lou_dotsToChar</h3>
<a name="index-lou_005fdotsToChar"></a>

<div class="example">
<pre class="example">int lou_dotsToChar (
  const char *tableList,
  const widechar *inbuf,
  widechar *outbuf,
  int length,
  int mode)
</pre></div>

<p>This function takes a widechar string in <code>inbuf</code> consisting of dot 
patterns and converts it to a widechar string in <code>outbuf</code> 
consisting of characters according to the specifications in 
<code>tableList</code>. <code>length</code> is the length of both <code>inbuf</code> and 
<code>outbuf</code>. The dot patterns in <code>inbuf</code> can be in either 
liblouis format or Unicode braille. The function returns 1 on success 
and 0 on failure.
</p>
<hr>
<a name="lou_005fcharToDots"></a>
<a name="lou_005fcharToDots-1"></a>
<h3 class="section">6.12 lou_charToDots</h3>
<a name="index-lou_005fcharToDots"></a>

<div class="example">
<pre class="example">int lou_charToDots (
  const char *tableList,
  const widechar *inbuf,
  widechar *outbuf,
  int length,
  int mode)
</pre></div>

<p>This function is the inverse of <code>lou_dotsToChar</code>. It takes a
widechar string in <code>inbuf</code> consisting of characters and converts it
to a widechar string in <code>outbuf</code> consisting of dot patterns
according to the specifications in <code>tableList</code>. <code>length</code> is the
length of both <code>inbuf</code> and <code>outbuf</code>. The dot patterns in
<code>outbufbuf</code> are in liblouis format if the mode bit <code>ucBrl</code> is 
not set and in Unicode format if it is set. The function returns 1 on
success and 0 on failure.
</p>
<hr>
<a name="lou_005fregisterLogCallback"></a>
<a name="lou_005fregisterLogCallback-1"></a>
<h3 class="section">6.13 lou_registerLogCallback</h3>
<a name="index-lou_005fregisterLogCallback"></a>

<div class="example">
<pre class="example">typedef void (*logcallback) (
  int level,
  const char *message);
  
void lou_registerLogCallback (
  logcallback callback);
</pre></div>

<p>This function can be used to register a custom logging callback. The
callback must take a single argument, the message string. By default
log messages are printed to stderr, or if a filename was specified
with <code>lou_logFile</code> then messages are logged to that
file. <code>lou_registerLogCallback</code> overrides the default
callback. Passing <code>NULL</code> resets to the default callback.
</p>
<hr>
<a name="lou_005fsetLogLevel"></a>
<a name="lou_005fsetLogLevel-1"></a>
<h3 class="section">6.14 lou_setLogLevel</h3>
<a name="index-lou_005fsetLogLevel"></a>

<div class="example">
<pre class="example">typedef enum
{
  LOG_ALL = 0,
  LOG_DEBUG = 10000,
  LOG_INFO = 20000,
  LOG_WARN = 30000,
  LOG_ERROR = 40000,
  LOG_FATAL = 50000,
  LOG_OFF = 6000
} logLevels;
void lou_setLogLevel (
  logLevels level);
</pre></div>

<p>This function can be used to influence the amount of logging, from
fatal error messages only to detailed debugging messages. Supported
values are <code>LOG_DEBUG</code>, <code>LOG_INFO</code>, <code>LOG_WARN</code>,
<code>LOG_ERROR</code>, <code>LOG_FATAL</code> and <code>LOG_OFF</code>. Enabling
logging at a given level also enables logging at all higher
levels. Setting the level to <code>LOG_OFF</code> disables logging. The
default level is <code>LOG_INFO</code>.
</p>
<hr>
<a name="lou_005flogFile"></a>
<a name="lou_005flogFile-1"></a>
<h3 class="section">6.15 lou_logFile</h3>
<a name="index-lou_005flogFile"></a>

<div class="example">
<pre class="example">void lou_logFile (
  char *fileName);
</pre></div>

<p>This function is used when it is not convenient either to let messages
be printed on stderr or to use redirection, as when liblouis is used
in a GUI application or in liblouisutdml. Any error messages generated
will be printed to the file given in this call. The entire path name of
the file must be given.
</p>
<hr>
<a name="lou_005flogPrint"></a>
<a name="lou_005flogPrint-_0028deprecated_0029"></a>
<h3 class="section">6.16 lou_logPrint (deprecated)</h3>
<a name="index-lou_005flogPrint"></a>

<div class="example">
<pre class="example">void lou_logPrint (
  char *format,
  ...);
</pre></div>

<p>This function is called like <code>fprint</code>. It can be used by other
libraries to print messages to the file specified by the call to
<code>lou_logFile</code>. In particular, it is used by the companion
library liblouisutdml.
</p>
<p>This function is deprecated as of version 2.6.0.
</p>
<hr>
<a name="lou_005flogEnd"></a>
<a name="lou_005flogEnd-1"></a>
<h3 class="section">6.17 lou_logEnd</h3>
<a name="index-lou_005flogEnd"></a>

<div class="example">
<pre class="example">lou_logEnd ();
</pre></div>

<p>This function is used at the end of processing a document to close the 
log file, so that it can be read by the rest of the program.
</p>
<hr>
<a name="lou_005fsetDataPath"></a>
<a name="lou_005fsetDataPath-1"></a>
<h3 class="section">6.18 lou_setDataPath</h3>
<a name="index-lou_005fsetDataPath"></a>

<div class="example">
<pre class="example">char *lou_setDataPath (
  char *path);
</pre></div>

<p>This function is used to tell liblouis and liblouisutdml where tables 
and files are located. It thus makes them completely relocatable, even 
on Linux. The <code>path</code> is the directory where the subdirectories 
<code>liblouis/tables</code> and <code>liblouisutdml/lbu_files</code> are rooted or 
located. The function returns a pointer to the <code>path</code>.
</p>
<hr>
<a name="lou_005fgetDataPath"></a>
<a name="lou_005fgetDataPath-1"></a>
<h3 class="section">6.19 lou_getDataPath</h3>
<a name="index-lou_005fgetDataPath"></a>

<div class="example">
<pre class="example">char *lou_getDataPath ();
</pre></div>

<p>This function returns a pointer to the path set by 
<code>lou_setDataPath</code>. If no path has been set it returns <code>NULL</code>.
</p>
<hr>
<a name="lou_005fgetTable"></a>
<a name="lou_005fgetTable-1"></a>
<h3 class="section">6.20 lou_getTable</h3>
<a name="index-lou_005fgetTable"></a>

<div class="example">
<pre class="example">void *lou_getTable (
  char *tableList);
</pre></div>

<p><code>tableList</code> is a list of names of table files separated by
commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). If no errors are found this function
returns a pointer to the compiled table. If errors are found error
messages are logged to the log callback (see
<code>lou_registerLogCallback</code>). Errors result in a <code>NULL</code>
pointer being returned.
</p>
<hr>
<a name="lou_005fcheckTable"></a>
<a name="lou_005fcheckTable-1"></a>
<h3 class="section">6.21 lou_checkTable</h3>
<a name="index-lou_005fcheckTable"></a>

<div class="example">
<pre class="example">int lou_checkTable (const char *tableList);
</pre></div>

<p>This function does the same as <code>lou_getTable</code> but does not return
a pointer to the resulting table. It is to be preferred if only the
validity of a table needs to be checked. <code>tableList</code> is a list of
names of table files separated by commas, as explained previously
(see <a href="#translation_002dtables"><code>tableList</code> parameter in
<code>lou_translateString</code></a>). If no errors are found this function
returns a non-zero. If errors are found error messages are logged to
the log callback (see <code>lou_registerLogCallback</code>) and the return
value is <code>0</code>.
</p>
<hr>
<a name="lou_005freadCharFromFile"></a>
<a name="lou_005freadCharFromFile-1"></a>
<h3 class="section">6.22 lou_readCharFromFile</h3>
<a name="index-lou_005freadCharFromFile"></a>

<div class="example">
<pre class="example">int lou_readCharFromFile (
  const char *fileName,
  int *mode);
</pre></div>

<p>This function is provided for situations where it is necessary to read
a file which may contain little-endian or big-endian 16-bit Unicode
characters or ASCII8 characters. The return value is a little-endian
character, encoded as an integer. The <code>fileName</code> parameter is the
name of the file to be read. The <code>mode</code> parameter is a pointer to
an integer which must be set to 1 on the first call. After that, the
function takes care of it. On end-of-file the function returns
<code>EOF</code>.
</p>
<hr>
<a name="lou_005ffree"></a>
<a name="lou_005ffree-1"></a>
<h3 class="section">6.23 lou_free</h3>
<a name="index-lou_005ffree"></a>

<div class="example">
<pre class="example">void lou_free ();
</pre></div>

<p>This function should be called at the end of the application to free
all memory allocated by liblouis. Failure to do so will result in
memory leaks. Do <em>NOT</em> call <code>lou_free</code> after each
translation. This will force liblouis to compile the translation
tables every time they are used, resulting in great inefficiency.
</p>
<hr>
<a name="Python-bindings"></a>
<a name="Python-bindings-1"></a>
<h3 class="section">6.24 Python bindings</h3>

<p>There are Python bindings for <code>lou_translateString</code>,
<code>lou_translate</code>, <code>lou_backTranslateString</code>,
<code>lou_backTranslate</code>, <code>lou_hyphenate</code>, <code>checkTable</code>,
<code>lou_compileString</code> and <code>lou_version</code>. For installation
instructions see the the <samp>README</samp> file in the <samp>python</samp>
directory. Usage information is included in the Python module itself.
</p>

<hr>
<a name="Concept-Index"></a>
<a name="Concept-Index-1"></a>
<h2 class="unnumbered">Concept Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-characters-operand">characters operand</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-dots-operand">dots operand</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-multi_002dcell-dot-pattern">multi-cell dot pattern</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-opcode">opcode</a>:</td><td>&nbsp;</td><td valign="top"><a href="#How-to-Write-Translation-Tables">How to Write Translation Tables</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Concept-Index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-virtual-dots">virtual dots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Overview">Overview</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Concept-Index_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Concept-Index_cp_letter-V"><b>V</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="Opcode-Index"></a>
<a name="Opcode-Index-1"></a>
<h2 class="unnumbered">Opcode Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Opcode-Index_opcode_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-opcode" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-after">after</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-always">always</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-before">before</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begcaps">begcaps</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemph">begemph</a>:</td><td>&nbsp;</td><td valign="top"><a href="#None">None</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemphphrase">begemphphrase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase">Phrase</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begemphword">begemphword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Word">Word</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begmidword">begmidword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begnum">begnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-begword">begword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-capsign">capsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-capsnocont">capsnocont</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Processing-Opcodes">Special Processing Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-class">class</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dClass-Opcodes">Character-Class Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comp6">comp6</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compbrl">compbrl</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context">context</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contraction">contraction</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-correct">correct</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-correct-Opcode">The correct Opcode</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-decpoint">decpoint</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Symbol-Opcodes">Special Symbol Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-digit">digit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-display">display</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-emphclass">emphclass</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Emphasis-class">Emphasis class</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-emphletter">emphletter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Letter">Letter</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endcaps">endcaps</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemph">endemph</a>:</td><td>&nbsp;</td><td valign="top"><a href="#None">None</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphphrase-after">endemphphrase after</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase">Phrase</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphphrase-before">endemphphrase before</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase">Phrase</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endemphword">endemphword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Word">Word</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endnum">endnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-endword">endword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-exactdots">exactdots</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-grouping">grouping</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-hyphen">hyphen</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Special-Symbol-Opcodes">Special Symbol Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-include">include</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-J">J</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-joinnum">joinnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-joinword">joinword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-largesign">largesign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lenemphphrase">lenemphphrase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Phrase">Phrase</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letsign">letsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-letter">letter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-litdigit">litdigit</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-locale">locale</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lowercase">lowercase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lowword">lowword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-math">math</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midendword">midendword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midnum">midnum</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midword">midword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multind">multind</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-noback">noback</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocont">nocont</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocontractsign">nocontractsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nocross">nocross</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nofor">nofor</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsign">noletsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsignafter">noletsignafter</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-noletsignbefore">noletsignbefore</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-numsign">numsign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Braille-Indicator-Opcodes">Braille Indicator Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-partword">partword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass2">pass2</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass3">pass3</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pass4">pass4</a>:</td><td>&nbsp;</td><td valign="top"><a href="#The-Context-and-Multipass-Opcodes">The Context and Multipass Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-postpunc">postpunc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prepunc">prepunc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-prfword">prfword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-punctuation">punctuation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-repeated">repeated</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-replace">replace</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-repword">repword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-sign">sign</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-space">space</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sufword">sufword</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapcc">swapcc</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapcd">swapcd</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-swapdd">swapdd</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Swap-Opcodes">Swap Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syllable">syllable</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-undefined">undefined</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Miscellaneous-Opcodes">Miscellaneous Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uplow">uplow</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-uppercase">uppercase</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Character_002dDefinition-Opcodes">Character-Definition Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Opcode-Index_opcode_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-word">word</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Translation-Opcodes">Translation Opcodes</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Opcode-Index_opcode_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-E"><b>E</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-H"><b>H</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-J"><b>J</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-L"><b>L</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-N"><b>N</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-R"><b>R</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Opcode-Index_opcode_letter-W"><b>W</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="Function-Index"></a>
<a name="Function-Index-1"></a>
<h2 class="unnumbered">Function Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-fn" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Function-Index_fn_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fbackTranslate"><code>lou_backTranslate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fbackTranslate">lou_backTranslate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fbackTranslateString"><code>lou_backTranslateString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fbackTranslateString">lou_backTranslateString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcharToDots"><code>lou_charToDots</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcharToDots">lou_charToDots</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcheckTable"><code>lou_checkTable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckTable">lou_checkTable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcompileString"><code>lou_compileString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcompileString">lou_compileString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fdotsToChar"><code>lou_dotsToChar</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fdotsToChar">lou_dotsToChar</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ffree"><code>lou_free</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ffree">lou_free</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetDataPath"><code>lou_getDataPath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetDataPath">lou_getDataPath</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetTable"><code>lou_getTable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetTable">lou_getTable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fgetTypeformForEmphClass"><code>lou_getTypeformForEmphClass</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fgetTypeformForEmphClass">lou_getTypeformForEmphClass</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fhyphenate"><code>lou_hyphenate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fhyphenate">lou_hyphenate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogEnd"><code>lou_logEnd</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogEnd">lou_logEnd</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogFile"><code>lou_logFile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogFile">lou_logFile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005flogPrint"><code>lou_logPrint</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005flogPrint">lou_logPrint</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005freadCharFromFile"><code>lou_readCharFromFile</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005freadCharFromFile">lou_readCharFromFile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fregisterLogCallback"><code>lou_registerLogCallback</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fregisterLogCallback">lou_registerLogCallback</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fsetDataPath"><code>lou_setDataPath</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fsetDataPath">lou_setDataPath</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fsetLogLevel"><code>lou_setLogLevel</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fsetLogLevel">lou_setLogLevel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslate"><code>lou_translate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslate">lou_translate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslateString"><code>lou_translateString</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslateString">lou_translateString</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fversion"><code>lou_version</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fversion">lou_version</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Function-Index_fn_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>

<hr>
<a name="Program-Index"></a>
<a name="Program-Index-1"></a>
<h2 class="unnumbered">Program Index</h2>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Program-Index_pg_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-pg" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th><a name="Program-Index_pg_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fallround"><code>lou_allround</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fallround">lou_allround</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fcheckhyphens"><code>lou_checkhyphens</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fcheckhyphens">lou_checkhyphens</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fchecktable"><code>lou_checktable</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fchecktable">lou_checktable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005fdebug"><code>lou_debug</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005fdebug">lou_debug</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftrace"><code>lou_trace</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftrace">lou_trace</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lou_005ftranslate-1"><code>lou_translate</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#lou_005ftranslate-_0028program_0029">lou_translate (program)</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Program-Index_pg_letter-L"><b>L</b></a>
 &nbsp; 
</td></tr></table>

<hr>



</body>
</html>
